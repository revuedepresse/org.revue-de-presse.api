<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>R&eacute;dacteurs (Writers) - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.log.overview.html">Pr&eacute;sentation</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.log.html">Zend_Log</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.log.formatters.html">Formateurs (mise en forme)</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.log.writers" class="section"><div class="info"><h1 class="title">Rédacteurs (Writers)</h1></div>
    

    <p class="para">
        Un rédacteur est un objet qui hérite de
        <span class="classname">Zend_Log_Writer_Abstract</span>. La responsabilité d&#039;un rédacteur est
        d&#039;enregistrer des données de log dans un stockage particulier.
    </p>

    <div class="section" id="zend.log.writers.stream" name="zend.log.writers.stream"><div class="info"><h1 class="title">Écrire vers un flux (stream)</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Stream</span> envoie des données de log à un
            <a href="http://www.php.net/stream" class="link external">&raquo; flux de <acronym class="acronym">PHP</acronym></a>.
        </p>

        <p class="para">
            Pour écrire des données de log dans le buffer d&#039;affichage de PHP, il faut utiliser
            l&#039;URL <code class="code">php://output</code>. Alternativement, vous pouvez préférer envoyer des
            données de log directement à un flux comme <b><tt>STDERR</tt></b>
            (<code class="code">php://stderr</code>). <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'php://output'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
</p>

        <p class="para">
            Pour écrire des données dans un fichier, employer un des <a href="http://www.php.net/manual/fr/wrappers.php#wrappers.file" class="link external">&raquo; Filesystem URLs</a>:
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/chemin/vers/fichierdelog'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
 Par défaut, le flux s&#039;ouvre en mode d&#039;ajout (<code class="code">&quot;a&quot;</code>). Pour
            l&#039;ouvrir avec un mode différent, le constructeur de
            <span class="classname">Zend_Log_Writer_Stream</span> accepte un deuxième paramètre facultatif
            pour le mode.
        </p>

        <p class="para">
            Le constructeur de <span class="classname">Zend_Log_Writer_Stream</span> accepte également
            une ressource existante de flux : <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$flux</span> = @<a href="http://www.php.net/fopen"><span style="color: #000066;">fopen</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/chemin/vers/fichierdelog'</span>, <span style="color: #ff0000;">'a'</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>! <span style="color: #0000ff;">$flux</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; throw <span style="color: #000000; font-weight: bold;">new</span> Exception<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Impossible d<span style="color: #000099; font-weight: bold;">\'</span>ouvrir le flux'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$flux</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
 Vous ne pouvez pas indiquer le mode pour des ressources existantes de flux.
            Le faire entraînera une <span class="classname">Zend_Log_Exception</span>.
        </p>
    </div>

    <div class="section" id="zend.log.writers.database" name="zend.log.writers.database"><div class="info"><h1 class="title">Écrire dans des bases de données</h1></div>
        

        <p class="para">
            <span class="classname">Zend_Log_Writer_Db</span> écrit les informations de log dans une
            table de base de données en utilisant <span class="classname">Zend_Db</span>. Le constructeur de
            <span class="classname">Zend_Log_Writer_Db</span> reçoit une instance de
            <span class="classname">Zend_Db_Adapter</span>, un nom de table, et un plan de correspondance
            entre les colonnes de la base de données et les données élémentaires d&#039;événement :
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$parametres</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a> <span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'username'</span> =&gt; <span style="color: #ff0000;">'malory'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'password'</span> =&gt; <span style="color: #ff0000;">'******'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'camelot'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'PDO_MYSQL'</span>, <span style="color: #0000ff;">$parametres</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$planDeCorrespondance</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'niveau'</span> =&gt; <span style="color: #ff0000;">'priority'</span>, <span style="color: #ff0000;">'msg'</span> =&gt; <span style="color: #ff0000;">'message'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Db<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$db</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'nom_de_la_table_de_log'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">$planDeCorrespondance</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
 L&#039;exemple ci-dessus écrit une ligne unique de données de log dans la table
            appelée <code class="code">nom_de_la_table_de_log</code>. La colonne de base de données appelée
            <code class="code">niveau</code> reçoit le niveau de priorité et la colonne appelée <code class="code">msg</code>
            reçoit le message de log.
        </p>
    </div>

    <div class="section" id="zend.log.writers.firebug" name="zend.log.writers.firebug"><div class="info"><h1 class="title">Écrire vers Firebug</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Firebug</span> envoie des données d&#039;historisation vers
        la <a href="http://www.getfirebug.com/" class="link external">&raquo; console Firebug</a>.
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.wildfire.firebug.console.png" alt="zend.wildfire.firebug.console.png" width="310" height="151" /></div></div>
    </p>

    <p class="para">
        Toutes les données sont envoyées via le composant
        <span class="classname">Zend_Wildfire_Channel_HttpHeaders</span> qui utilise les en-têtes <acronym class="acronym">HTTP</acronym> pour
        s&#039;assurer que le contenu de la page n&#039;est pas perturbé. Déboguer les requêtes <acronym class="acronym">AJAX</acronym> qui
        requière du <acronym class="acronym">JSON</acronym> &quot;propre&quot; ou un réponse <acronym class="acronym">XML</acronym> est possible avec cette approche.
    </p>

    <p class="para">Éléments requis :</p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                Navigateur Firefox idéalement en version 3 mais la version 2 est aussi
                supportée.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                L&#039;extension Firefox nommée Firebug qui peut être téléchargée à cette adresse
                <a href="https://addons.mozilla.org/en-US/firefox/addon/1843" class="link external">&raquo; https://addons.mozilla.org/en-US/firefox/addon/1843</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                L&#039;extension Firefox nommée FirePHP ui peut être téléchargée à cette adresse
                <a href="https://addons.mozilla.org/en-US/firefox/addon/6149" class="link external">&raquo; https://addons.mozilla.org/en-US/firefox/addon/6149</a>.
            </p>
        </li>
    </ul>

    <div class="example"><div class="info"><p><b>Example #1 Journaliser avec Zend_Controller_Front</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Placez ceci dans votre fichier d'amorçage</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// avant de distribuer votre contrôleur frontal</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Firebug<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utiliser ceci dans vos fichiers de modèles, vues et contrôleurs</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">log</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Ceci est un message de log !'</span>, Zend_Log::<span style="color: #006600;">INFO</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="example"><div class="info"><p><b>Example #2 Journaliser sans Zend_Controller_Front</b></p></div>
        

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Firebug<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$request</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Controller_Request_Http<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Controller_Response_Http<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span> = Zend_Wildfire_Channel_HttpHeaders::<span style="color: #006600;">getInstance</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">setRequest</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$request</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">setResponse</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$response</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Démarrer l'output buffering</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/ob_start"><span style="color: #000066;">ob_start</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Maintenant vous pouvez appeler le logguer</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">log</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Ceci est un message de log !'</span>, Zend_Log::<span style="color: #006600;">INFO</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Envoi des données d'historisation vers le navigateur</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$channel</span>-&gt;<span style="color: #006600;">flush</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$response</span>-&gt;<span style="color: #006600;">sendHeaders</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.firebug.priority-styles" name="zend.log.writers.firebug.priority-styles"><div class="info"><h1 class="title">Paramétrer les styles pour les priorités</h1></div>
        

        <p class="para">
            Les priorités incorporées et celles définies par l&#039;utilisateur peuvent être
            stylisées avec la méthode  <span class="methodname">setPriorityStyle()</span>.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addPriority</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'FOO'</span>, <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">8</span>, <span style="color: #ff0000;">'TRACE'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">foo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Foo Message'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Le style par défaut pour les priorités définies par l&#039;utilisateur peut être
            paramétrer avec la méthode  <span class="methodname">setDefaultPriorityStyle()</span>.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setDefaultPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'TRACE'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Les styles supportés sont les suivants : <table class="doctable table"><div class="info"><caption><b>Styles d&#039;historisation de Firebug</b></caption></div>
                    

                    
                        <thead valign="middle">
                            <tr valign="middle">
                                <th>Style</th>
                                <th>Description</th>
                            </tr>

                        </thead>


                        <tbody valign="middle" class="tbody">
                            <tr valign="middle">
                                <td align="left"><b><tt>LOG</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation basique</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>INFO</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation de type
                                information</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>WARN</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation de type
                                avertissement</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>ERROR</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation de type erreur (celui-ci
                                incrémente le compteur d&#039;erreur de Firebug)</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>TRACE</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation avec une trace
                                extensible</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>EXCEPTION</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation de type erreur avec une
                                trace extensible</td>
                            </tr>


                            <tr valign="middle">
                                <td align="left"><b><tt>TABLE</tt></b></td>
                                <td align="left">Affiche un message d&#039;historisation avec une table
                                extensible</td>
                            </tr>

                        </tbody>
                    
                </table>

            </p>
    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data" name="zend.log.writers.firebug.preparing-data"><div class="info"><h1 class="title">Préparer les données pour l&#039;historisation</h1></div>
        

        <p class="para">
            Toute variable <acronym class="acronym">PHP</acronym> peut être journalisée avec les priorités incorporées, un
            formatage spécial est requis si vous utilisez des styles d&#039;historisation un peu plus
            spécialisé.
        </p>

        <p class="para">
            Les styles <b><tt>LOG</tt></b>, <b><tt>INFO</tt></b>, <b><tt>WARN</tt></b>,
            <b><tt>ERROR</tt></b> et <b><tt>TRACE</tt></b> ne requièrent pas de formatage spécial.
        </p>
    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data.exception" name="zend.log.writers.firebug.preparing-data.exception"><div class="info"><h1 class="title">Historisation des exceptions</h1></div>
        

        <p class="para">
            Pour journaliser une <span class="classname">Zend_Exception</span>, fournissez simplement
            l&#039;objet exception au logguer. Il n&#039;y a pas d&#039;importance sur la priorité ou le style que
            vous avez fourni puisque l&#039;exception est automatiquement reconnue.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$exception</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Exception<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Test d<span style="color: #000099; font-weight: bold;">\'</span>exception'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">err</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$exception</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.firebug.preparing-data.table" name="zend.log.writers.firebug.preparing-data.table"><div class="info"><h1 class="title">Historisation sous forme de tableau</h1></div>
        

        <p class="para">
            Vous pouvez aussi journaliser des données en les formatant comme un tableau. Les
            colonnes sont automatiquement reconnues et la première ligne de données devient
            automatiquement la ligne d&#039;en-têtes.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setPriorityStyle</span><span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">8</span>, <span style="color: #ff0000;">'TABLE'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addPriority</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'TABLE'</span>, <span style="color: #cc66cc;">8</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$table</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Ligne de résumé pour la table'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Colonne 1'</span>, <span style="color: #ff0000;">'Colonne 2'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Ligne 1 c 1'</span>,<span style="color: #ff0000;">' Ligne 1 c 2'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Ligne 2 c 1'</span>,<span style="color: #ff0000;">' Ligne 2 c 2'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">table</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$table</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>
</div>
    <div class="section" id="zend.log.writers.mail" name="zend.log.writers.mail"><div class="info"><h1 class="title">Écrire vers un émail</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Mail</span> va écrire les entrées du log dans un message
        émail en utilisant <span class="classname">Zend_Mail</span>. Le constructeur de
        <span class="classname">Zend_Log_Writer_Mail</span> requière un objet
        <span class="classname">Zend_Mail</span> et optionnellement un objet
        <span class="classname">Zend_Layout</span>.
    </p>

    <p class="para">
        Le cas d&#039;utilisation principal de <span class="classname">Zend_Log_Writer_Mail</span> est
        la notification les développeurs, les administrateurs ou toute personne concernée,
        d&#039;une erreur qui peut survenir dans des scripts.
        <span class="classname">Zend_Log_Writer_Mail</span> a été crée avec l&#039;idée que si quelque chose
        ne tourne pas rond, une intervention humaine est nécessaire.
    </p>

    <p class="para">
        Voici un exemple d&#039;utilisation basique :
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">setFrom</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'errors@example.org'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addTo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'project_developers@example.org'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mail</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ecrit le sujet. Un résumé des erreurs est ajouté à la suite</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setSubjectPrependText</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Errors with script foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Limite uniquement au niveau Warning ou supérieur</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">addFilter</span><span style="color: #66cc66;">&#40;</span>Zend_Log::<span style="color: #006600;">WARN</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Essai</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">error</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'unable to connect to database'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// A la fermeture, Zend_Mail::send() est inviqué et concernera</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// tous les logs passés dans le filtre.</span></div></li></ol></div></div></div>


    <p class="para">
        <span class="classname">Zend_Log_Writer_Mail</span> utilisera un corps de message
        en texte plein (plain text) par défaut.
    </p>

    <p class="para">
        Le filtre est géré. Par exemple si le filtre est réglé sur Warnings, et que
        2 évènements warnings et 5 évènements erreurs se produisent, alors 7
        évènements seront envoyés.
    </p>

    <div class="section" id="zend.log.writers.mail.layoutusage" name="zend.log.writers.mail.layoutusage"><div class="info"><h1 class="title">Utilisation avec Zend_Layout</h1></div>
        

        <p class="para">
            Une instance de <span class="classname">Zend_Layout</span> peut être utilisée pour générer
            du HTML qui fera partie de l&#039;émail multipart. Si <span class="classname">Zend_Layout</span>
            est utilisé, <span class="classname">Zend_Log_Writer_Mail</span> considérera que le corps HTML
            du message sera la valeur du rendu de <span class="classname">Zend_Layout</span>.
        </p>

        <p class="para">
            En utilisant <span class="classname">Zend_Log_Writer_Mail</span> avec un objet
            <span class="classname">Zend_Layout</span> vous pouvez utiliser un formateur
            personnalisé grâce à  <span class="methodname">setLayoutFormatter()</span>. Si aucun formateur spécifique
            <span class="classname">Zend_Layout</span> n&#039;est indiqué, le formateur en cours d&#039;utilisation
            sera appelé. Voici un exemple :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$mail</span>-&gt;<span style="color: #006600;">setFrom</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'errors@example.org'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;-&gt;<span style="color: #006600;">addTo</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'project_developers@example.org'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Nous ne spécifions pas le sujet du message dans l'objet Zend_Mail !</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Utilisons un simple objet Zend_Layout</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layout</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Layout<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Créons un formateur à base de listes</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$layoutFormatter</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Formatter_Simple<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'&lt;li&gt;'</span> . Zend_Log_Formatter_Simple::<span style="color: #006600;">DEFAULT_FORMAT</span> . <span style="color: #ff0000;">'&lt;/li&gt;'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mail<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mail</span>, <span style="color: #0000ff;">$layout</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Appliquons le formateur sur le rendu de Zend_Layout.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setLayoutFormatter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$layoutFormatter</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setSubjectPrependText</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Errors with script foo.php'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">addFilter</span><span style="color: #66cc66;">&#40;</span>Zend_Log::<span style="color: #006600;">WARN</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// essai</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">error</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'unable to connect to database'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// A la fermeture, Zend_Mail::send() est inviqué et concernera</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// tous les logs passés dans le filtre.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// l'email contiendra une partie &quot;plain text&quot;, et une partie HTML</span></div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.log.writers.mail.dynamicsubjectline" name="zend.log.writers.mail.dynamicsubjectline"><div class="info"><h1 class="title">Ligne du sujet dynamique</h1></div>
        

        <p class="para">
            La méthode  <span class="methodname">setSubjectPrependText()</span> est utilisée à la place de
             <span class="methodname">Zend_Mail::setSubject()</span> pour que la ligne de sujet dans l&#039;émail
            soit générée dynamiquement avant l&#039;envoi de l&#039;émail. Par exemple, si le texte indiqué
            est &quot;Erreurs depuis ce script&quot;, le sujet de l&#039;émail généré par
            <span class="classname">Zend_Log_Writer_Mail</span> avec 2 warnings et 5 errors sera alors
            &quot;Erreurs depuis ce script (warn = 2; error = 5)&quot;. Si le sujet n&#039;est pas indiqué
            via <span class="classname">Zend_Log_Writer_Mail</span>, la ligne de sujet
            de <span class="classname">Zend_Mail</span>, si il y en a une, sera utilisée.
        </p>
    </div>

    <div class="section" id="zend.log.writers.mail.caveats" name="zend.log.writers.mail.caveats"><div class="info"><h1 class="title">Attention</h1></div>
        

        <p class="para">
            Envoyer des rapports d&#039;erreurs par emails peut être dangereux.
            Si votre système de surveillance d&#039;erreurs n&#039;est pas correct ou a un problème,
            vous risquez de vous retrouver inondé de tonnes d&#039;emails en provenance de
            votre application.
        </p>

        <p class="para">
            A l&#039;heure actuelle, il n&#039;existe dans <span class="classname">Zend_Log_Writer_Mail</span>
            aucun système de limitation ou de contrôle du nombre ou de la fréquence d&#039;envoi
            des emails. Si vous nécessitez un tel système, vous devrez l&#039;implémenter vous-même.
        </p>

        <p class="para">
            Encore une fois, l&#039;unique but de <span class="classname">Zend_Log_Writer_Mail</span>
            est la notification d&#039;un humain au sujet d&#039;une erreur. Si ce système est
            clairement contrôlé, alors il peut devenir un avantage très appréciable.
        </p>
    </div>
</div>
    <div class="section" id="zend.log.writers.syslog" name="zend.log.writers.syslog"><div class="info"><h1 class="title">Ecrire dans lee journal du système</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_Syslog</span> écrit les rapports de log dans le
        journal système (syslog). En interne, il utilise les fonctions <acronym class="acronym">PHP</acronym>
         <span class="methodname">openlog()</span>,
         <span class="methodname">closelog()</span>, et
         <span class="methodname">syslog()</span>.
    </p>

    <p class="para">
        Un cas d&#039;utilisation intéressant de <span class="classname">Zend_Log_Writer_Syslog</span>
        est le cluster de machines. La fonctionnalité de journal système permet de
        faire en sorte que chaque machine enregistre dans un fichier de journal centralisé,
        ce qui simplifie l&#039;administration.
    </p>

    <p class="para">
        Par défaut, tous les messages gérés sont préfixés par &quot;Zend_Log&quot;. Si vous souhaitez
        changer ce nom, utilisez le constructeur ou l&#039;accesseur:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// A l'instanciation</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Syslog<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'application'</span> =&gt; <span style="color: #ff0000;">'FooBar'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Plus tard:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setApplicationName</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'BarBaz'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Le journal système vous aidera aussi à identifier les messages
        par types d&#039;application (&quot;facility&quot;), les programmes de journalisation système
        vont générer des fichiers journaux différents en fonction des types
        d&#039;application, ce qui là encore, peut aider dans l&#039;administration.
    </p>

    <p class="para">
        Pour spécifier le type d&#039;application, utilisez le constructeur ou l&#039;accesseur.
        Cette option peut être l&#039;une des constantes utilisées par
         <span class="methodname">openlog()</span>, définies dans la page
        <a href="http://php.net/openlog" class="link external">&raquo; du manuel de openlog()</a>.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// A l'instanciation</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Syslog<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'facility'</span> =&gt; LOG_AUTH<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Plus tard</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span>-&gt;<span style="color: #006600;">setFacility</span><span style="color: #66cc66;">&#40;</span>LOG_USER<span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        En utilisant l&#039;objet de log, continuez d&#039;utiliser les constantes de
        <span class="classname">Zend_Log</span>, elles vont être converties en leurs valeurs
        par  <span class="methodname">syslog()</span>.
    </p>
</div>
    <div class="section" id="zend.log.writers.zendmonitor" name="zend.log.writers.zendmonitor"><div class="info"><h1 class="title">Ecrire vers le moniteur Zend Server</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Log_Writer_ZendMonitor</span> vous permet de journaliser des évènements
        via l&#039;API de Zend Server. Vous pouvez alors aggréger des messages de journal pour l&#039;application
        et tout son environnement, ceci vers un seul endroit. En interne, cet objet utilise simplement la
        fonction  <span class="methodname">monitor_custom_event()</span> issue de Zend Monitor.
    </p>

    <p class="para">
        Une caractéristique particulière de l&#039;API Monitor est que vous pouvez spécifier n&#039;importe quelle
        information dans le journal. Par exemple, journaliser une exception est possible en journalisant
        tout l&#039;objet Exception d&#039;un coup et pas juste son message. L&#039;objet sera alors visible et analysable
        via le moniteur d&#039;évènement de Zend Server.
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Zend Monitor doit être installé et activé</b><br /></span>
        

        
            Pour utiliser cet objet d&#039;écriture, Zend Monitor doit petre installé et activé.
            Si ce n&#039;est pas le cas, alors l&#039;objet d&#039;écriture agira de manière transparente et ne fera
            rien du tout.
        <br />
    </p></blockquote>

    <p class="para">
        Instancier l&#039;objet d&#039;écriture <span class="classname">ZendMonitor</span> est très simple:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$writer</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_ZendMonitor<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>&nbsp; &nbsp; = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$writer</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Ensuite, journalisez vos évènements comme d&#039;habitude:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Voici un message'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Vous pouvez ajouter des informations à journaliser, passez les comme second paramètre:
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exception rencontrée'</span>, <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Ce deuxième paramètre peut être de type scalaire, objet, ou tableau; si vous souhaitez
        passer plusieurs informations d&#039;un seul coup, utilisez un tableau.
    </p>

    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$log</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Exception rencontrée'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'request'</span>&nbsp; &nbsp;=&gt; <span style="color: #0000ff;">$request</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'exception'</span> =&gt; <span style="color: #0000ff;">$e</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


    <p class="para">
        Au sein de Zend Server, votre évènement est enregistré comme un &quot;évènement personnalisé&quot; (custom event).
        Depuis l&#039;onglet &quot;Monitor&quot;, sélectionnez le sous menu &quot;Evènements&quot;(Events), et utilisez ensuite le filtre
        &quot;Personnalisé&quot;(Custom).
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-events.png" alt="zend.log.writers.zendmonitor-events.png" width="" height="" /></div></div>
    </p>

    <p class="para">
        Evènements dans le récapitulatif Zend Server Monitor
    </p>

    <p class="para">
        Sur cette image, les deux premiers évènements listés sont des évènements personnalisés enregistré via
        l&#039;objet d&#039;écriture <span class="classname">ZendMonitor</span>. Cliquez alors sur un évènement pour voir toutes ses
        informations.
    </p>

    <p class="para">
        <div class="inlinemediaobject"><div class="imageobject"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.log.writers.zendmonitor-event.png" alt="zend.log.writers.zendmonitor-event.png" width="" height="" /></div></div>
    </p>

    <p class="para">
        Détails de l&#039;évènement dans Zend Server Monitor
    </p>

    <p class="para">
        Cliquer sur le sous menu &quot;Personnalisé&quot;(Custom) montre les détails, c&#039;est à dire ce que vous avez passé
        comme deuxième argument à la méthode de journalisation. Cet information est enregistrée sous la clé
        <var class="varname">info</var>; et vous pouvez voir que l&#039;objet de requête a été enregistré dans cet exemple.
    </p>

    <blockquote><p><b class="note">Note</b>: <span class="info"><b>Intégration avec Zend_Application</b><br /></span>
        

        
            Par défaut, les commandes <strong class="command">zf.sh</strong> et <strong class="command">zf.bat</strong> ajoute une
            configuration pour la ressource &#039;log&#039; de<a href="zend.application.available-resources.html#zend.application.available-resources.log" class="link"><span class="classname">Zend_Application</span>
                </a>, elle inclut la configuration pour l&#039;objet d&#039;écriture du journal
            <span class="classname">ZendMonitor</span>. Aussi, le
            <span class="classname">ErrorController</span> utilise ce journal pour journaliser les exceptions de
            l&#039;application.
        <br />

        
            Comme dit précedemment, si l&#039;API de Zend Monitor API n&#039;est pas détectée sur votre installation de PHP,
            alors le journal ne fera rien du tout.
        <br />
    </p></blockquote>
</div>

    <div class="section" id="zend.log.writers.null" name="zend.log.writers.null"><div class="info"><h1 class="title">Déraciner les rédacteurs</h1></div>
        

        <p class="para">
            Le <span class="classname">Zend_Log_Writer_Null</span> est une souche qui écrit des
            données de log nulle part. Il est utile pour neutraliser le log ou déraciner le log
            pendant les essais :<div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Null;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// va nulle part</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
</p>
        </div>

        <div class="section" id="zend.log.writers.mock" name="zend.log.writers.mock"><div class="info"><h1 class="title">Tester avec un simulacre</h1></div>
            

        <p class="para">
            Le <span class="classname">Zend_Log_Writer_Mock</span> est un rédacteur très simple qui
            enregistre les données brutes qu&#039;il reçoit dans un tableau exposé comme propriété
            publique. <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$simulacre</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Mock;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$simulacre</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/var_dump"><span style="color: #000066;">var_dump</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$mock</span>-&gt;<span style="color: #006600;">events</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Array</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// (</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [timestamp] =&gt; 2007-04-06T07:16:37-07:00</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [message] =&gt; Message d'information</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [priority] =&gt; 6</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; &nbsp; [priorityName] =&gt; INFO</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// )</span></div></li></ol></div></div></div>
</p>

        <p class="para">
            Pour effacer les événements notés dans le simulacre, il faut simplement réaliser
            <code class="code">$simulacre-&gt;events = array()</code>.
        </p>
    </div>

    <div class="section" id="zend.log.writers.compositing" name="zend.log.writers.compositing"><div class="info"><h1 class="title">Additionner les rédacteurs</h1></div>
        

        <p class="para">
            Il n&#039;y a aucun objet composite de rédacteurs. Cependant, une instance
            d&#039;enregistreur peut écrire vers tout nombre de rédacteurs. Pour faire ceci, employer la
            méthode  <span class="methodname">addWriter()</span> : <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur1</span> =</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/chemin/vers/premier/fichierdelog'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$redacteur2</span> =</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Log_Writer_Stream<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'/chemin/vers/second/fichierdelog'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Log<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur1</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">addWriter</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$redacteur2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// va dans les 2 rédacteurs</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$logger</span>-&gt;<span style="color: #006600;">info</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;Message d'information&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>
</p>
        </div>
    </div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.log.overview.html">Pr&eacute;sentation</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.log.html">Zend_Log</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.log.formatters.html">Formateurs (mise en forme)</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.log.html">Zend_Log</a></li>
  <li><a href="zend.log.overview.html">Pr&eacute;sentation</a></li>
  <li class="active"><a href="zend.log.writers.html">R&eacute;dacteurs (Writers)</a></li>
  <li><a href="zend.log.formatters.html">Formateurs (mise en forme)</a></li>
  <li><a href="zend.log.filters.html">Filtres</a></li>
  <li><a href="zend.log.factory.html">Utiliser la fabrique pour cr&eacute;er des logs</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>