<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Filter_Input - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.filter.writing_filters.html">&Eacute;criture de filtres</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.filter.html">Zend_Filter</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.filter.inflector.html">Zend_Filter_Inflector</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.filter.input" class="section"><div class="info"><h1 class="title">Zend_Filter_Input</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Filter_Input</span> propose une manière générique de déclarer des
        filtres et des validateurs, de les appliquer comme un ensemble, à une collection de données,
        et enfin de récupérer ces données validées et filtrées. Les valeurs sont retournées
        échappées par défaut, pour une meilleure sécurité relative au HTML.
    </p>

    <p class="para">
        Considérez cette classe comme une boite noire dans laquelle va passer une variable de
        collection, typiquement un tableau <acronym class="acronym">PHP</acronym> représentant des données externes. Les données
        arrivent dans l&#039;application depuis une source externe, donc potentiellement dangereuse,
        comme des variables de requête <acronym class="acronym">HTTP</acronym>, d&#039;un service Web, d&#039;un fichier, ou autre. L&#039;application
        demande alors à la boite noire l&#039;accès à une ou plusieurs données, en spécifiant sous quelle
        forme elle s&#039;attend à voir la donnée. La boite inspecte alors la donnée pour la valider, et
        ne la laisse sortir que si celle-ci respecte les règles que l&#039;application demande. Grâce à
        une simple classe et un mécanisme facile, ceci encourage les développeurs à prendre des
        bonnes pratiques au regard de la sécurité des applications.
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                <em class="emphasis">Les filtres</em> transforment les entrées en supprimant ou
                changeant des caractères dans leurs valeurs. Le but est de &quot;normaliser&quot; les valeurs
                jusqu&#039;à ce qu&#039;elles correspondent aux attentes exigées. Par exemple si une chaine
                d&#039;entiers (numériques) est attendue, et que la donnée d&#039;entrée est &quot;abc123&quot;, alors
                en sortie du filtre la valeur &quot;123&quot; sera proposée.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <em class="emphasis">Les validateurs</em> vérifient la validité d&#039;une donnée, sans
                la transformer. Si la validation échoue, le validateur renseignera sur les problèmes
                rencontrés.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                <em class="emphasis">Les échappeurs</em> transforment une valeur en supprimant
                certains caractères qui peuvent avoir une signification spéciale dans un contexte
                donné. Par exemple, les caractères &#039;&lt;&#039; et &#039;&gt;&#039; délimitent les balises HTML,
                ainsi si une donnée contenant ces caractères est affichée directement dans un
                navigateur, la sortie peut être corrompue et mener à des problèmes de sécurité.
                Échapper les caractères est le fait de leur enlever toute signification spéciale,
                ils seront traités comme des caractères tout à fait normaux.
            </p>
        </li>
    </ul>

    <p class="para">Pour utiliser <span class="classname">Zend_Filter_Input</span> :</p>

    <ol type="1">
        <li class="listitem">
            <p class="para">Déclarez des règles de filtre et de validateur</p>
        </li>

        <li class="listitem">
            <p class="para">
                Ajoutez des filtres et des validateurs dans
                <span class="classname">Zend_Filter_Input</span>
            </p>
        </li>

        <li class="listitem">
            <p class="para">Passer les données d&#039;entrée à <span class="classname">Zend_Filter_Input</span></p>
        </li>

        <li class="listitem">
            <p class="para">Récupérez les données valides et/ou des rapports divers</p>
        </li>
    </ol>

    <p class="para">Les sections suivantes expliquent comment manipuler la classe.</p>

    <div class="section" id="zend.filter.input.declaring" name="zend.filter.input.declaring"><div class="info"><h1 class="title">Déclarer des règles de filtre et de validateur</h1></div>
        

        <p class="para">
            Avant de créer une instance de <span class="classname">Zend_Filter_Input</span>, déclarez
            deux tableaux de règles pour les filtres, et les validateurs. Ce tableau associatif met
            en relation le champ de la donnée dans le tableau originel et le nom du
            filtre/validateur.
        </p>

        <p class="para">
            L&#039;exemple qui suit indique que le champ &quot;month&quot; est filtré par un
            <span class="classname">Zend_Filter_Digits</span>, et le champ &quot;account&quot; est filtré par un
            <span class="classname">Zend_Filter_StringTrim</span>. Puis, une règle de validation
            s&#039;appliquera au champ &quot;account&quot;, celui-ci sera validé s&#039;il ne contient que des
            caractères alphabétiques (lettres).
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$filters</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'account'</span> =&gt; <span style="color: #ff0000;">'StringTrim'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'account'</span> =&gt; <span style="color: #ff0000;">'Alpha'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Chaque clé du tableau <var class="varname">$filters</var> représente une donnée à laquelle sera
            appliqué le filtre correspondant en valeur de tableau.
        </p>

        <p class="para">Le filtre peut être déclaré selon différents formats :</p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    Une chaine de caractères, qui sera transformée en nom de classe.
                    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'Digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    Un objet instance d&#039;une classe implémentant
                    <span class="classname">Zend_Filter_Interface</span> ou
                    <span class="classname">Zend_Validate_Interface</span>.
                    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$digits</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Digits<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span>&nbsp; &nbsp;=&gt; <span style="color: #0000ff;">$digits</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    Un tableau, pour déclarer une chaine de filtres ou validateurs. Les
                    éléments de ce tableau peuvent être des chaînes représentant des noms de classe,
                    ou des objets directement. Aussi, vous pouvez utiliser comme valeur un tableau
                    contenant le nom du filtre ou validateur, et d&#039;éventuels arguments à passer à
                    son constructeur.
                    <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span>&nbsp; &nbsp;=&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Digits'</span>,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// chaine</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Int<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #808080; font-style: italic;">// objet</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Between'</span>, <span style="color: #cc66cc;">1</span>, <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>&nbsp; <span style="color: #808080; font-style: italic;">// chaine + arguments pour le constructeur</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

                </p>
            </li>
        </ul>

        <blockquote><p><b class="note">Note</b>: 
            
                Si vous choisissez de déclarer un filtre ou validateur avec des arguments de
                constructeur, alors la règle générale devra elle aussi utiliser un tableau pour
                sa/ses déclarations de filtres ou validateurs.
            <br />
        </p></blockquote>

        <p class="para">
            Un joker &quot;<code class="code">*</code> &quot; peut être utilisé dans le tableau des filtres ou des
            validateurs. Ceci aura pour effet d&#039;appliquer le validateur ou le filtre à toutes les
            entrées du tableau traité. Notez que l&#039;ordre des filtres / validateurs est important
            dans le tableau, car il seront appliqués dans l&#039;ordre dans lequel ils ont été
            déclarés.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$filters</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'*'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'StringTrim'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <span style="color: #ff0000;">'Digits'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

    </div>

    <div class="section" id="zend.filter.input.running" name="zend.filter.input.running"><div class="info"><h1 class="title">Créer le processeur de filtres et validateurs</h1></div>
        

        <p class="para">
            Lorsque vos tableaux de filtres et de validateurs ont été construits, passez les
            en argument au constructeur de <span class="classname">Zend_Filter_Input</span>. Ceci va
            retourner un objet pré-configuré qui saura alors traiter tout un tableau de données
            d&#039;entrée.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Les données d&#039;entrée peuvent être placées dans le troisième paramètre du
            constructeur. Ces données possèdent en clé leur nom, et en valeur leur valeur.
            Typiquement, les tableaux superglobaux <var class="varname">$_GET</var> et <var class="varname">$_POST</var>
            possèdent la structure idéale pour passer dans
            <span class="classname">Zend_Filter_Input</span>.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <span style="color: #0000ff;">$_GET</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Aussi, la méthode  <span class="methodname">setData()</span> accepte les données de la même manière
            que le troisième argument du constructeur.
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$newData</span> = <span style="color: #0000ff;">$_POST</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">setData</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$newData</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            La méthode  <span class="methodname">setData()</span> réaffecte une nouveau tableau de valeurs
            d&#039;entrée dans l&#039;objet <span class="classname">Zend_Filter_Input</span>, en écrasant toute autre
            source s&#039;y trouvant. Ceci est pratique afin de réutiliser des règles communes de filtres
            / validateurs, sur différentes sources.
        </p>
    </div>

    <div class="section" id="zend.filter.input.results" name="zend.filter.input.results"><div class="info"><h1 class="title">Récupérer les champs validés/filtré, et les éventuels rapports</h1></div>
        

        <p class="para">
            Une fois l&#039;objet configuré, et le tableau de données d&#039;entrée passé, vous pouvez
            récupérer les rapports concernant les champs absents, invalides ou inconnus. Vous pouvez
            évidemment aussi récupérer les valeurs validées/filtrées des champs d&#039;entrée
            valides.
        </p>

        <div class="section" id="zend.filter.input.results.isvalid" name="zend.filter.input.results.isvalid"><div class="info"><h1 class="title">Demander si l&#039;entrée est valide</h1></div>
            

            <p class="para">
                Si toutes les données d&#039;entrée passent les règles de validation la méthode
                 <span class="methodname">isValid()</span> retourne <b><tt>TRUE</tt></b>. Si n&#039;importe quelle donnée
                d&#039;entrée n&#039;est pas validée, ou est manquante, alors  <span class="methodname">isValid()</span> retourne
                <b><tt>FALSE</tt></b>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">&quot;OK<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


            <p class="para">
                Cette méthode accepte aussi un paramètre facultatif nommant un champ
                particulier dans la donnée d&#039;entrée. Ceci permet une vérification
                individuelle.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">isValid</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'month'</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #ff0000;">&quot;Le champ 'month' est OK<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.filter.input.results.reports" name="zend.filter.input.results.reports"><div class="info"><h1 class="title">Récupérer les infos des champs invalides, absents ou inconnus</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Les champs <em class="emphasis">invalides</em> sont ceux qui ne passent pas
                        un ou plusieurs critères définis par les validateurs.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Les champs <em class="emphasis">absents</em> sont ceux qui ne sont pas
                        présents dans la donnée d&#039;entrée, alors que la méta commande
                        <code class="code">&#039;presence&#039;=&gt;&#039;required&#039;</code> était présente (voyez <a href="zend.filter.input.html#zend.filter.input.metacommands.presence" class="link">la section</a> sur les
                        méta commandes).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Les champs <em class="emphasis">inconnus</em> sont ceux présents dans la
                        donnée d&#039;entrée alors que aucun validateur ni filtre ne lui avait attribué
                        de règle.
                    </p>
                </li>
            </ul>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">hasInvalid</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span> || <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">hasMissing</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <span style="color: #0000ff;">$messages</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getMessages</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// getMessages() retourne la fusion de getInvalid() et getMissing()</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">hasInvalid</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <span style="color: #0000ff;">$invalidFields</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getInvalid</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">hasMissing</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <span style="color: #0000ff;">$missingFields</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getMissing</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">hasUnknown</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <span style="color: #0000ff;">$unknownFields</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getUnknown</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>


            <p class="para">
                Les valeurs retournées par  <span class="methodname">getMessages()</span> sont sous la forme d&#039;un
                tableau dont la clé est la règle concernée et la valeur un tableau d&#039;erreurs la
                concernant. Le tableau d&#039;erreurs comporte en clé le nom de la règle déclarée qui
                peut être différent des noms de champs vérifiés par la règle.
            </p>

            <p class="para">
                La méthode  <span class="methodname">getMessages()</span> retourne la fusion des tableaux
                retournés par  <span class="methodname">getInvalid()</span> et  <span class="methodname">getMissing()</span>. Ces méthodes
                retournent une sous-partie des messages correspondant soit aux échecs de validation,
                soit aux champs qui sont déclarés requis mais qui sont absents.
            </p>

            <p class="para">
                La méthode  <span class="methodname">getErrors()</span> retourne un tableau associatif dont les
                clés sont des noms de règles et les valeurs associées des tableaux identifiants les
                erreurs. Les identifiants d&#039;erreurs sont des chaînes constantes et figées, qui
                permettent d&#039;identifier la raison de l&#039;échec de validation, tandis que les messages
                associés sont eux-mêmes personnalisables. Voir <a href="zend.validate.introduction.html#zend.validate.introduction.using" class="xref">Utilisation basique des validateurs</a> pour plus d&#039;information.
            </p>

            <p class="para">
                Vous pouvez spécifier le message retourné par  <span class="methodname">getMissing()</span> en
                utilisant l&#039;option &quot;missingMessage&quot;, en tant qu&#039;argument du constructeur de
                <span class="classname">Zend_Filter_Input</span> ou en utilisant l&#039;option
                 <span class="methodname">setOptions()</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'missingMessage'</span> =&gt; <span style="color: #ff0000;">&quot;Field '%field%' is required&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// alternative method:</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">setOptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                And you can also add a translator which gives you the ability to provide multiple
                languages for the messages which are returned by
                <span class="classname">Zend_Filter_Input</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$translate</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Translate_Adapter_Array<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Filter_Input::<span style="color: #006600;">MISSING_MESSAGE</span> =&gt; <span style="color: #ff0000;">&quot;Where is the field?&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">setTranslator</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$translate</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                When you are using an application wide translator, then it will also be used by
                <span class="classname">Zend_Filter_Input</span>. In this case you will not have to set the
                translator manually.
            </p>

            <p class="para">
                Le résultat de la méthode  <span class="methodname">getUnknown()</span> est un tableau associatif
                dont les clés sont des noms de champs et les valeurs sont les valeurs de champs
                correspondants. Les noms de champs sont dans ce cas les clés du tableau au lieu des
                noms de règles, car tout champs n&#039;ayant pas de règles définies est considéré comme
                un champs inconnu.
            </p>
        </div>

        <div class="section" id="zend.filter.input.results.escaping" name="zend.filter.input.results.escaping"><div class="info"><h1 class="title">Récupérer les champs valides</h1></div>
            

            <p class="para">
                Tout champ non invalide, non absent et non inconnu, est considéré comme
                valide. Vous pouvez alors en récupérer la valeur via un accesseur magique. Des
                méthodes classiques existent aussi, comme  <span class="methodname">getEscaped()</span> et
                 <span class="methodname">getUnescaped()</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$m</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">month</span>;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808080; font-style: italic;">// donnée échappée (accesseur magique)</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$m</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getEscaped</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'month'</span><span style="color: #66cc66;">&#41;</span>;&nbsp; &nbsp;<span style="color: #808080; font-style: italic;">// donnée échapée</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$m</span> = <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">getUnescaped</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'month'</span><span style="color: #66cc66;">&#41;</span>; <span style="color: #808080; font-style: italic;">// donnée non échappée</span></div></li></ol></div></div></div>


            <p class="para">
                Par défaut, récupérer un champ le passe automatiquement au travers de
                <span class="classname">Zend_Filter_HtmlEntities</span>. Ce comportement est considéré comme
                défaut pour un affichage en HTML. Le filtre <code class="code">HtmlEntities</code> réduit de
                manière significative les risques de sécurité liés à un affichage involontaire d&#039;une
                valeur.
            </p>

            <blockquote><p><b class="note">Note</b>: 
                
                    La méthode  <span class="methodname">getUnescaped()</span> retourne le champ brut, vous devez
                    alors prendre vos précautions lors d&#039;un affichage HTML. Attention aux problèmes
                    de sécurité XSS (Cross Site Scripting).
                <br />
            </p></blockquote>

            <div class="warning"><b class="warning">Warning</b><div class="info"><h1 class="title">Escaping unvalidated fields</h1></div>
                

                <p class="para">
                    As mentioned before  <span class="methodname">getEscaped()</span> returns only validated
                    fields. Fields which do not have an associated validator can not be received
                    this way. Still, there is a possible way. You can add a empty validator for all
                    fields.
                </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'*'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


                <p class="para">
                    But be warned that using this notation introduces a security leak which could
                    be used for cross-site scripting attacks. Therefor you should always set
                    individual validators for each field.
                </p>
            </div>

            <p class="para">
                Il est possible de définir un autre filtre comme filtre par défaut pour
                récupération des champs. Ceci se fait via le constructeur :
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'escapeFilter'</span> =&gt; <span style="color: #ff0000;">'StringTrim'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Aussi, la méthode  <span class="methodname">setDefaultEscapeFilter()</span> fait la même chose
                :
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">setDefaultEscapeFilter</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_StringTrim<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Il est possible de passer une chaine, ou directement un objet instance de
                <span class="classname">Zend_Filter</span>.
            </p>

            <p class="para">
                Les filtres d&#039;échappement comme vus juste précédemment, doivent être spécifiés
                de cette manière là. S&#039;ils avaient été spécifiés comme filtres dans le tableau de
                <span class="classname">Zend_Filter_Input</span>, ils auraient pu faire échouer les
                validateurs, car les filtres sont exécutés <em class="emphasis">AVANT</em> les
                validateurs. Aussi, il n&#039;aurait plus été possible de proposer la donnée de sortie de
                manière échappée et non échappée. Ainsi, déclarer un filtre d&#039;échappement des
                données devrait toujours être effectué en utilisant la méthode
                 <span class="methodname">setDefaultEscapeFilter()</span>, et non pas le tableau
                <var class="varname">$filters</var>.
            </p>

            <p class="para">
                Comme il n&#039;y a qu&#039;une seule méthode  <span class="methodname">getEscaped()</span>, il ne peut y
                avoir qu&#039;un seul filtre utilisé pour l&#039;échappement. Il est cependant possible
                d&#039;utiliser une chaine de filtre, ou encore de dériver la classe
                <span class="classname">Zend_Filter_Input</span> en créant d&#039;autres méthodes de récupération
                de données, plus spécifiques.
            </p>
        </div>
    </div>

    <div class="section" id="zend.filter.input.metacommands" name="zend.filter.input.metacommands"><div class="info"><h1 class="title">Utiliser des méta commandes pour contrôler les règles des filtres et
        validateurs</h1></div>
        

        <p class="para">
            En plus de déclarer un mapping entre des champs d&#039;un tableau, et des validateurs
            et des filtres, il est possible d&#039;utiliser des méta commandes pour contrôler le
            comportement de Zend_Filter_Input. Les méta commandes se présentent sous la forme de
            chaînes dans le tableau des filtres ou des validateurs.
        </p>

        <div class="section" id="zend.filter.input.metacommands.fields" name="zend.filter.input.metacommands.fields"><div class="info"><h1 class="title">La méta commande <b><tt>FIELDS</tt></b></h1></div>
            

            <p class="para">
                Si le nom de la règle d&#039;un filtre ou validateur est différente du champs
                auquel elle doit s&#039;appliquer, vous pouvez spécifier le nom du champ avec la méta
                commande &quot;fields&quot;.
            </p>

            <p class="para">
                Vous pouvez spécifier cette méta commande en utilisant la constante de classe
                <span class="classname">Zend_Filter_Input::FIELDS</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$filters</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Digits'</span>,&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// nom du filtre à l'index [0]</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'fields'</span> =&gt; <span style="color: #ff0000;">'mo'</span> <span style="color: #808080; font-style: italic;">// nom du champ à l'index ['fields']</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Dans l&#039;exemple ci dessus, la règle applique le filtre &quot;digits&quot; au champ
                d&#039;entrée nommé &quot;mo&quot;. La chaine &quot;month&quot; devient alors un simple mnémonique pour cette
                règle, elle n&#039;est pas utilisée comme nom de champ si celui-ci est renseigné avec la
                méta commande &quot;fields&quot;, mais elle est utilisée comme nom de règle.
            </p>

            <p class="para">
                La valeur par défaut de la méta commande &quot;fields&quot; est l&#039;index de la règle
                courante. Dans l&#039;exemple ci dessus, si la méta commande &quot;fields&quot; est omise, la règle
                s&#039;appliquerait au champ &quot;month&quot;.
            </p>

            <p class="para">
                Un autre usage de la méta commande &quot;fields&quot; est pour préciser les champs aux
                filtres ou validateurs qui en attendent plusieurs en entrée. Si la méta commande
                &quot;fields&quot; est un tableau, alors le filtre/validateur correspondant aura comme
                argument la valeur des champs. Pensez au cas où l&#039;on demande à l&#039;utilisateur de
                saisir 2 fois son mot de passe. Imaginons un validateur qui prend en paramètre un
                tableau de champs et retourne <b><tt>TRUE</tt></b> si les champs sont égaux.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'StringEquals'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'fields'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'password1'</span>, <span style="color: #ff0000;">'password2'</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Invoque la classe Zend_Validate_StringEquals,</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// en lui passant un tableau contenant les valeurs</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// des champs 'password1' and 'password2'.</span></div></li></ol></div></div></div>


            <p class="para">
                Si la validation échoue, alors le nom de la règle (<code class="code">&#039;password&#039;</code>)
                est utilisé dans le retour de  <span class="methodname">getInvalid()</span>, et non pas les noms des
                champs spécifiés dans &quot;fields&quot;.
            </p>
        </div>

        <div class="section" id="zend.filter.input.metacommands.presence" name="zend.filter.input.metacommands.presence"><div class="info"><h1 class="title">Méta commande <b><tt>PRESENCE</tt></b></h1></div>
            

            <p class="para">
                Si la valeur de cette méta commande est &quot;required&quot;, alors le champ doit
                exister dans la donnée d&#039;entrée. Autrement, il est reporté comme étant un champ
                manquant.
            </p>

            <p class="para">
                Vous pouvez spécifier cette méta commande avec la constante de classe
                <span class="classname">Zend_Filter_Input::PRESENCE</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'presence'</span> =&gt; <span style="color: #ff0000;">'required'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">La valeur par défaut de cette méta commande est &quot;optional&quot;.</p>
        </div>

        <div class="section" id="zend.filter.input.metacommands.default" name="zend.filter.input.metacommands.default"><div class="info"><h1 class="title">La méta commande <b><tt>DEFAULT_VALUE</tt></b></h1></div>
            

            <p class="para">
                Si le champ n&#039;est pas présent dans la donnée d&#039;entrée mais que celui-ci
                possède une méta commande &quot;default&quot;, alors il obtient la valeur de la méta
                commande.
            </p>

            <p class="para">
                Vous pouvez spécifier cette méta commande avec la constante de classe
                <span class="classname">Zend_Filter_Input::DEFAULT_VALUE</span>.
            </p>

            <p class="para">
                La valeur de cette méta commande ne s&#039;applique qu&#039;avant l&#039;invocation des
                validateurs, et seulement pour la règle en cours.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'default'</span> =&gt; <span style="color: #ff0000;">'1'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// pas de valeur pour le champ 'month'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">month</span>; <span style="color: #808080; font-style: italic;">// affiche 1</span></div></li></ol></div></div></div>


            <p class="para">
                Si vous utilisez pour une règle la méta commande <b><tt>FIELDS</tt></b> afin de
                définir un tableau de champs, vous pouvez définir un tableau pour la méta commande
                <b><tt>DEFAULT_VALUE</tt></b>. Les valeurs par défaut seront alors les clés
                correspondantes à chaque champ manquant. Si <b><tt>FIELDS</tt></b> définit de multiples
                champs mais que <b><tt>DEFAULT_VALUE</tt></b> est un scalaire, alors cette valeur
                scalaire sera utilisée pour tous les champs manquants.
            </p>

            <p class="para">Il n&#039;y a pas de valeur par défaut pour cette méta commande.</p>
        </div>

        <div class="section" id="zend.filter.input.metacommands.allow-empty" name="zend.filter.input.metacommands.allow-empty"><div class="info"><h1 class="title">La méta commande <b><tt>ALLOW_EMPTY</tt></b></h1></div>
            

            <p class="para">
                Par défaut, si un champ existe dans le tableau d&#039;entrées, alors les
                validateurs lui sont appliqués, même si la valeur de ce champs est la chaine vide
                (<code class="code">&#039;&#039;</code>). Ceci peut mener à des échecs de validation. Par exemple un
                validateur digits (chiffres) va échouer sur une chaine vide (laissant croire que la
                donnée puisse être composée de lettres).
            </p>

            <p class="para">
                Si la chaine vide doit pouvoir être considérée comme valide, utilisez la méta
                commande &quot;allowEmpty&quot; avec la valeur <b><tt>TRUE</tt></b>.
            </p>

            <p class="para">
                Vous pouvez spécifier cette méta commande avec la constante de classe
                <span class="classname">Zend_Filter_Input::ALLOW_EMPTY</span>
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'address2'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Alnum'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'allowEmpty'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">La valeur par défaut de cette méta commande est <b><tt>FALSE</tt></b>.</p>

            <p class="para">
                Dans la cas peut commun ou vous déclarez une règle de validation avec aucun
                validateurs, mais que la méta commande &quot;allowEmpty&quot; est mise à <b><tt>FALSE</tt></b>
                (le champ est considéré invalide s&#039;il est vide),
                <span class="classname">Zend_Filter_Input</span> retourne un message d&#039;erreur par défaut que
                vous pouvez récupérer avec la méthode  <span class="methodname">getMessages()</span>. Ce message se
                change grâce à l&#039;option &quot;notEmptyMessage&quot; spécifiée en constructeur de
                <span class="classname">Zend_Filter_Input</span> ou via la méthode
                 <span class="methodname">setOptions()</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'notEmptyMessage'</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">&quot;Une valeur non vide est requise pour le champ '%field%'&quot;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Autre méthode :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">setOptions</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.filter.input.metacommands.break-chain" name="zend.filter.input.metacommands.break-chain"><div class="info"><h1 class="title">La méta commande <b><tt>BREAK_CHAIN</tt></b></h1></div>
            

            <p class="para">
                Par défaut, si une règle possède plus d&#039;un validateur, tous sont appliqués à
                la donnée d&#039;entrée, et les éventuels messages d&#039;erreur résultants sont la somme de
                tous les messages individuels des validateurs.
            </p>

            <p class="para">
                Si la valeur de la méta commande &quot;<code class="code">breakChainOnFailure</code>&quot; est
                <b><tt>TRUE</tt></b>, la chaine de validation va se terminer dès lors qu&#039;un des
                validateur termine sur un échec.
            </p>

            <p class="para">
                Vous pouvez spécifier cette méta commande au moyen de la constante de classe
                <span class="classname">Zend_Filter_Input::BREAK_CHAIN</span>
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Between<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span>,<span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'breakChainOnFailure'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #0000ff;">$validators</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">La valeur par défaut de cette méta commande est <b><tt>FALSE</tt></b>.</p>

            <p class="para">
                La classe <span class="classname">Zend_Validate</span> est plus flexible lors du bris
                de la chaine d&#039;exécution, par rapport à <span class="classname">Zend_Filter_Input</span>.
                Avec <span class="classname">Zend_Validate</span>, vous pouvez mettre l&#039;option pour casser
                la chaine indépendamment pour chaque validateur. Avec
                <span class="classname">Zend_Filter_Input</span>, la méta commande &quot;breakChainOnFailure&quot;
                s&#039;applique à tous les validateurs dans la règle. Pour un usage plus flexible, créez
                votre propre chaine de validation comme ceci :
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Créer une chaine de validation avec un attribut</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// breakChainOnFailure non uniforme</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$chain</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$chain</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Digits<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$chain</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Between<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span>,<span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #000000; font-weight: bold;">false</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$chain</span>-&gt;<span style="color: #006600;">addValidator</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_GreaterThan<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#41;</span>, <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Déclare la règloe de validation en faisant référence</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// à la chaine de validation ci dessus</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <span style="color: #0000ff;">$chain</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">null</span>, <span style="color: #0000ff;">$validators</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.filter.input.metacommands.messages" name="zend.filter.input.metacommands.messages"><div class="info"><h1 class="title">La méta commande <b><tt>MESSAGES</tt></b></h1></div>
            

            <p class="para">
                Vous pouvez attribuer des messages d&#039;erreur pour chaque validateur d&#039;une règle
                grâce à la méta commande &#039;messages&#039;. La valeur de cette méta commande varie si vous
                avez plusieurs validateurs dans une règle ou si vous voulez spécifier le message
                pour une erreur particulière concernant un des validateurs.
            </p>

            <p class="para">
                Vous pouvez utiliser la constante de classe
                <span class="classname">Zend_Filter_Input::MESSAGES</span> pour définir cette méta
                commande.
            </p>

            <p class="para">
                Voici un exemple simple qui enregistre un message d&#039;erreur pour une validateur
                de chiffres.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'messages'</span> =&gt; <span style="color: #ff0000;">'Un mois doit être un chiffre'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Si vous possédez plusieurs validateurs dont vous voulez personnaliser les
                messages d&#039;erreur, utilisez alors un tableau comme valeur de la méta commande
                &#039;messages&#039;.
            </p>

            <p class="para">
                Chaque élément de ce tableau s&#039;applique à un validateur au même niveau
                d&#039;index. Ainsi, un validateur à l&#039;index <em class="emphasis">n</em> verra son message
                d&#039;erreur modifié si vous utilisez l&#039;index <em class="emphasis">n</em> dans le tableau de
                la méta commande. Il est ainsi possible d&#039;autoriser certains validateurs à faire
                usage de leur message d&#039;erreur par défaut, alors que d&#039;autres posséderont un message
                personnalisé.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Between<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span>, <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'messages'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// utilise le message par défaut du vaidateur [0]</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Affecte un nouveau message pour le validateur [1]</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #cc66cc;">1</span> =&gt; <span style="color: #ff0000;">'Une valeur de mois doit être comprise entre 1 et 12'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Si un des validateurs a plusieurs messages d&#039;erreur, ils sont identifiés par
                une clé. Il existe différente clé dans chaque classe de validateur, ceux-ci servent
                d&#039;identifiants pour les messages d&#039;erreur. Chaque classe validateur définit aussi
                des constante pour les clés des messages d&#039;erreur. Cette constante peut être
                utilisée dans la méta commande &#039;messages&#039; en lui passant un tableau associatif
                plutôt qu&#039;une chaine.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'digits'</span>, <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Between<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span>, <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'messages'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Un mois ne peut contenir que des chiffres'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Validate_Between::<span style="color: #006600;">NOT_BETWEEN</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'La valeur %value% du mois doit être comprise'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <span style="color: #ff0000;">' entre %min% et %max%'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Validate_Between::<span style="color: #006600;">NOT_BETWEEN_STRICT</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'La valeur %value% du mois doit être comprise'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <span style="color: #ff0000;">' strictement entre %min% et %max%'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Vous devriez vous référer à la documentation de chaque validateur afin de
                savoir s&#039;il retourne plusieurs messages d&#039;erreur, les clés de ces messages et les
                jetons utilisables dans les modèles de message.
            </p>

            <p class="para">
                Si vous n&#039;avez qu&#039;un seul validateur dans vos règles de validation ou que
                tous les validateurs ont le même message de paramétrer, alors ils peuvent
                être référencés la construction additionnelle de type tableau :
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000000; font-weight: bold;">new</span> Zend_Validate_Between<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">1</span>, <span style="color: #cc66cc;">12</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'messages'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Validate_Between::<span style="color: #006600;">NOT_BETWEEN</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'La valeur %value% du mois doit être comprise'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <span style="color: #ff0000;">' entre %min% et %max%'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Zend_Validate_Between::<span style="color: #006600;">NOT_BETWEEN_STRICT</span> =&gt;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'La valeur %value% du mois doit être comprise'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <span style="color: #ff0000;">' strictement entre %min% et %max%'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <div class="section" id="zend.filter.input.metacommands.global" name="zend.filter.input.metacommands.global"><div class="info"><h1 class="title">Utiliser des options pour définir des méta commandes pour toutes les
            règles</h1></div>
            

            <p class="para">
                Les valeurs par défaut des méta commandes &quot;allowEmpty&quot;, &quot;breakChainOnFailure&quot;,
                et &quot;presence&quot; peuvent être dictées pour toutes les règles en utilisant l&#039;argument
                <var class="varname">$options</var> du constructeur de
                <span class="classname">Zend_Filter_Input</span>.
            </p>

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Tous les champs acceptent des valeurs vides</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'allowEmpty'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Il est possible d'écraser le comportement pour une règle précise.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$validators</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'month'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'Digits'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'allowEmpty'</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


            <p class="para">
                Les méta commandes &quot;fields&quot;, &quot;messages&quot;, et &quot;default&quot; ne bénéficient pas d&#039;un
                tel raccourci.
            </p>
        </div>
    </div>

    <div class="section" id="zend.filter.input.namespaces" name="zend.filter.input.namespaces"><div class="info"><h1 class="title">Ajouter des espaces de noms comme noms de classes</h1></div>
        

        <p class="para">
            Par défaut, l&#039;ajout d&#039;un validateur ou d&#039;un filtre sous forme de chaine, va faire
            en sort que <span class="classname">Zend_Filter_Input</span> cherche une correspondance sous
            l&#039;espace de nom <span class="classname">Zend_Filter_*</span> et
            <span class="classname">Zend_Validate_*</span>.
        </p>

        <p class="para">
            Si vous écrivez vos propres filtres (ou validateurs), la classe peut exister dans
            un autre espace de nom que <span class="classname">Zend_Filter</span> ou
            <span class="classname">Zend_Validate</span>. Il est alors possible de dire à
            <span class="classname">Zend_Filter_Input</span> de chercher dans ces espaces là. Ceci se fait
            via son constructeur :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'filterNamespace'</span> =&gt; <span style="color: #ff0000;">'My_Namespace_Filter'</span>, <span style="color: #ff0000;">'validatorNamespace'</span> =&gt; <span style="color: #ff0000;">'My_Namespace_Validate'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Filter_Input<span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$filters</span>, <span style="color: #0000ff;">$validators</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$options</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Alternativement, vous pouvez utiliser les méthodes
             <span class="methodname">addValidatorPrefixPath($prefix, $path)</span> ou
             <span class="methodname">addFilterPrefixPath($prefix, $path)</span>, qui proxie directement le chargeur de
            plugin utilisé par <span class="classname">Zend_Filter_Input</span> :
        </p>

        <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">addValidatorPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Autre_Namespace'</span>, <span style="color: #ff0000;">'Autre/Namespace'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$input</span>-&gt;<span style="color: #006600;">addFilterPrefixPath</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Foo_Namespace'</span>, <span style="color: #ff0000;">'Foo/Namespace'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Maitenant l'ordre de recherche des validateurs est :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 1. My_Namespace_Validate</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 2. Autre_Namespace</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 3. Zend_Validate</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// L'ordre de recherche des filtres est :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 1. My_Namespace_Filter</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 2. Foo_Namespace</span></div></li></ol></div></div></div>


        <p class="para">
            Il n&#039;est pas possible de supprimer les espaces de nommage
            <span class="classname">Zend_Filter</span> et <span class="classname">Zend_Validate</span>. Les espaces
            définis par l&#039;utilisateur sont cherchés en premiers, les espaces de nom Zend sont
            cherchés en derniers.
        </p>

        <blockquote><p><b class="note">Note</b>: 
            
                A partir de la version 1.5, la fonction  <span class="methodname">addNamespace($namespace)</span>
                est dépréciée et échangée avec le chargeur de plugin et les méthodes
                <code class="code">addFilterPrefixPath</code> et <code class="code">addValidatorPrefixPath</code> ont été
                ajoutées. De même la constante
                <span class="classname">Zend_Filter_Input::INPUT_NAMESPACE</span> est aussi dépréciée. Les
                constantes <span class="classname">Zend_Filter_Input::VALIDATOR_NAMESPACE</span> et
                <span class="classname">Zend_Filter_Input::FILTER_NAMESPACE</span> sont disponibles à partir
                de la version 1.7.0.
            <br />
        </p></blockquote>

        <blockquote><p><b class="note">Note</b>: 
            
                A partir de la version 1.0.4,
                <span class="classname">Zend_Filter_Input::NAMESPACE</span>, ayant une valeur
                <code class="code">namespace</code>, a été changé par
                <span class="classname">Zend_Filter_Input::INPUT_NAMESPACE</span>, ayant une valeur
                <code class="code">inputNamespace</code>, dans le but de se conformer à la réservation du mot clé
                <code class="code">namespace</code> par <acronym class="acronym">PHP</acronym> 5.3.
            <br />
        </p></blockquote>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.filter.writing_filters.html">&Eacute;criture de filtres</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.filter.html">Zend_Filter</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.filter.inflector.html">Zend_Filter_Inflector</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.filter.html">Zend_Filter</a></li>
  <li><a href="zend.filter.introduction.html">Introduction</a></li>
  <li><a href="zend.filter.set.html">Classes de filtre standards</a></li>
  <li><a href="zend.filter.filter_chains.html">Cha&icirc;nes de filtrage</a></li>
  <li><a href="zend.filter.writing_filters.html">&Eacute;criture de filtres</a></li>
  <li class="active"><a href="zend.filter.input.html">Zend_Filter_Input</a></li>
  <li><a href="zend.filter.inflector.html">Zend_Filter_Inflector</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>