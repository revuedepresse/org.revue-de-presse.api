<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>Zend_Db_Adapter - Zend Framework Manual</title>

</head>
<body>
<table width="100%">
    <tr valign="top">
        <td width="85%">
            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.html">Zend_Db</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.statement.html">Zend_Db_Statement</a></div>
                    </td>
                </tr>
            </table>
<hr />
<div id="zend.db.adapter" class="section"><div class="info"><h1 class="title">Zend_Db_Adapter</h1></div>
    

    <p class="para">
        <span class="classname">Zend_Db</span> et ses autres sous classes proposent une interface de
        connexion aux bases de données avec Zend Framework. <span class="classname">Zend_Db_Adapter</span>
        est la classe de base que vous utilisez pour vous connecter aux bases de données (SGBDs). Il
        y a différentes classes d&#039;adaptateur par SGBD.
    </p>

    <p class="para">
        Les classes <code class="code">Adapters</code> de <span class="classname">Zend_Db</span> créent un pont
        entre les extensions <acronym class="acronym">PHP</acronym> et une interface commune. Ceci vous aide à écrire des applications
        déployables avec de multiples SGBDs, demandant peu d&#039;efforts.
    </p>

    <p class="para">
        L&#039;interface de la classe d&#039;adaptateur est semblable à celle de l&#039;extension <a href="http://www.php.net/pdo" class="link external">&raquo; PHP Data Objects</a>. <span class="classname">Zend_Db</span>
        propose des classes d&#039;adaptateurs vers les drivers <acronym class="acronym">PDO</acronym> pour les SGBDs suivants :
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                IBM DB2 et Informix Dynamic Server (IDS), en utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-ibm" class="link external">&raquo; pdo_ibm</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                MySQL, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-mysql" class="link external">&raquo; pdo_mysql</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Microsoft <acronym class="acronym">SQL</acronym> Server, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-dblib" class="link external">&raquo; pdo_dblib</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Oracle, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-oci" class="link external">&raquo; pdo_oci</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                PostgreSQL, grâce à l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-pgsql" class="link external">&raquo; pdo_pgsql</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                SQLite, avec l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/pdo-sqlite" class="link external">&raquo; pdo_sqlite</a>.
            </p>
        </li>
    </ul>

    <p class="para">
        De plus, <span class="classname">Zend_Db</span> fournit aussi des classes se connectant avec
        les extensions <acronym class="acronym">PHP</acronym> propres aux SGBDs (hors <acronym class="acronym">PDO</acronym> donc), pour les SGBDs suivants :
    </p>

    <ul class="itemizedlist">
        <li class="listitem">
            <p class="para">
                MySQL, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/mysqli" class="link external">&raquo; mysqli</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Oracle, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/oci8" class="link external">&raquo; oci8</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                IBM DB2, utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/ibm_db2" class="link external">&raquo; ibm_db2</a>.
            </p>
        </li>

        <li class="listitem">
            <p class="para">
                Firebird (Interbase), utilisant l&#039;extension <acronym class="acronym">PHP</acronym> <a href="http://www.php.net/ibase" class="link external">&raquo; php_interbase</a>
            </p>
        </li>
    </ul>

    <blockquote><p><b class="note">Note</b>: 
        
            Chaque <span class="classname">Zend_Db_Adapter</span> utilise une extension <acronym class="acronym">PHP</acronym>. Vous
            devez donc les avoir activées pour utiliser les classes en question. Par exemple, si
            vous voulez utiliser une classe <span class="classname">Zend_Db_Adapter</span> basée sur <acronym class="acronym">PDO</acronym>,
            vous devrez alors avoir l&#039;extension <acronym class="acronym">PDO</acronym> d&#039;installée, ainsi que l&#039;extension représentant
            le driver spécifique à votre SGBD.
        <br />
    </p></blockquote>

    <div class="section" id="zend.db.adapter.connecting" name="zend.db.adapter.connecting"><div class="info"><h1 class="title">Se connecter à un SGBD en utilisant un adaptateur</h1></div>
        

        <p class="para">
            Cette section décrit comment créer une instance d&#039;un adaptateur
            <span class="classname">Zend_Db</span> de base de données.
        </p>

        <div class="section" id="zend.db.adapter.connecting.constructor" name="zend.db.adapter.connecting.constructor"><div class="info"><h1 class="title">Utilisation du constructeur du Zend_Db Adapter</h1></div>
            

            <p class="para">
                Vous pouvez créer une instance d&#039;un adaptateur en utilisant son constructeur.
                Celui-ci accepte un paramètre représentant un tableau d&#039;options.
            </p>

            <div class="example"><div class="info"><p><b>Example #1 Utiliser le constructeur de l&#039;adaptateur</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Db_Adapter_Pdo_Mysql<span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span> =&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span> =&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.connecting.factory" name="zend.db.adapter.connecting.factory"><div class="info"><h1 class="title">Utiliser la fabrique (Factory) de Zend_Db</h1></div>
            

            <p class="para">
                Alternativement, il est possible d&#039;utiliser la méthode statique
                 <span class="methodname">Zend_Db::factory()</span>. Celle-ci charge dynamiquement la classe
                d&#039;adaptateur correspondant en utilisant <a href="zend.loader.load.html#zend.loader.load.class" class="link">Zend_Loader::loadClass()</a>.
            </p>

            <p class="para">
                Le premier argument est une chaîne désignant l&#039;adaptateur souhaité. Par
                exemple, &quot;<span class="classname">Pdo_Mysql</span>&quot; va correspondre à la classe
                <span class="classname">Zend_Db_Adapter_Pdo_Mysql</span>. Le second paramètre est un tableau
                d&#039;options. C&#039;est le même que celui que vous auriez passé au constructeur de la
                classe directement.
            </p>

            <div class="example"><div class="info"><p><b>Example #2 Utilisation de la méthode statique de fabrique de Zend_Db</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Nous n'avons pas besoin de la ligne suivante car Zend_Db_Adapter_Pdo_Mysql</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// sera automatiquement chargé par la fabrique Zend_Db.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// require_once 'Zend/Db/Adapter/Pdo/Mysql.php';</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Charge automatiquement la classe Zend_Db_Adapter_Pdo_Mysql</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// et en créer une instance.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span> =&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span> =&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Si vous créez votre propre classe d&#039;adaptateur qui étend
                <span class="classname">Zend_Db_Adapter_Abstract</span> et que celle-ci ne respecte pas la
                syntaxe du préfixe package &quot;<span class="classname">Zend_Db_Adapter</span>&quot;, utilisez alors
                la clé &quot;<code class="code">adapterNamespace</code>&quot; dans le tableau de configuration passé à la
                méthode  <span class="methodname">factory()</span> afin de charger votre adaptateur.
            </p>

            <div class="example"><div class="info"><p><b>Example #3 Utilisation de la fabrique avec une classe personnalisée</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Charge automatiquement la classe MyProject_Db_Adapter_Pdo_Mysql</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// et l'instantie.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'adapterNamespace'</span> =&gt; <span style="color: #ff0000;">'MyProject_Db_Adapter'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.connecting.factory-config" name="zend.db.adapter.connecting.factory-config"><div class="info"><h1 class="title">Utiliser Zend_Config avec la fabrique Zend_Db</h1></div>
            

            <p class="para">
                Optionnellement, vous pouvez passer un objet de type <a href="zend.config.html" class="link">Zend_Config</a> en tant qu&#039;argument de la méthode
                 <span class="methodname">factory()</span>, concernant la configuration.
            </p>

            <p class="para">
                Il est alors nécessaire que l&#039;objet de configuration contienne une propriété
                <code class="code">adapter</code>, qui représente une chaîne de caractères décrivant l&#039;adaptateur
                à utiliser. De plus, l&#039;objet peut aussi contenir une propriété nommée
                <code class="code">params</code>, avec toutes les sous propriétés requises pour la configuration
                de l&#039;adaptateur.
            </p>

            <div class="example"><div class="info"><p><b>Example #4 Utilisation de la fabrique avec un objet de type Zend_Config</b></p></div>
                

                <div class="example-contents"><p>
                    Dans l&#039;exemple qui va suivre, l&#039;objet <span class="classname">Zend_Config</span>
                    est crée à partir d&#039;un tableau. Il eut été possible de le créer à partir de
                    fichiers externes, grâce à <a href="zend.config.adapters.ini.html" class="link">Zend_Config_Ini</a> ou <a href="zend.config.adapters.xml.html" class="link">Zend_Config_Xml</a>.
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$config</span> = <span style="color: #000000; font-weight: bold;">new</span> Zend_Config<span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'database'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'adapter'</span> =&gt; <span style="color: #ff0000;">'Mysqli'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'params'</span> =&gt; <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'username'</span> =&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'password'</span> =&gt; <span style="color: #ff0000;">'secret'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$config</span>-&gt;<span style="color: #006600;">database</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Le second paramètre de la méthode  <span class="methodname">factory()</span> doit être un tableau
                associatif décrivant les paramètres de l&#039;adaptateur à utiliser. Cet argument est
                optionnel, si un objet de type <span class="classname">Zend_Config</span> est utilisé en
                premier paramètre, alors il est supposé contenir les paramètres, et le second
                paramètre de  <span class="methodname">factory()</span> est alors ignoré.
            </p>
        </div>

        <div class="section" id="zend.db.adapter.connecting.parameters" name="zend.db.adapter.connecting.parameters"><div class="info"><h1 class="title">Paramètres de l&#039;adaptateur (Adapter)</h1></div>
            

            <p class="para">
                La liste ci dessous explique les différents paramètres acceptés par les
                classes d&#039;adaptateur <span class="classname">Zend_Db</span>.
            </p>

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">host</em> : le nom de l&#039;hôte hébergeant le SGBD. Vous
                        pouvez aussi spécifier une adresse IP. Si le SGBD se situe sur la même
                        machine que l&#039;application <acronym class="acronym">PHP</acronym>, &quot;localhost&quot; ou &quot;127.0.0.1&quot; devraient alors
                        être utilisés.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">username </em> : nom d&#039;utilisateur du compte de
                        connexion au SGBD.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">password</em> : mot de passe de l&#039;utilisateur du
                        compte de connexion au SGBD.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">dbname</em> : nom de la base de données située dans le
                        SGBD.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">port</em> : Certains SGBDs acceptent que l&#039;on spécifie
                        un port pour d&#039;y connecter. Indiquez le alors ici.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">charset</em> : encodage utilisé pour la connexion.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">options</em> : Ce paramètre est un tableau associatif
                        d&#039;options génériques à toutes les classes
                        <span class="classname">Zend_Db_Adapter</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">driver_options</em> : Ce paramètre est un tableau
                        associatif d&#039;options spécifiques à une extension de SGBD spécifique.
                        Typiquement, il est possible avec ce paramètre de passer des options
                        (attributs) au driver <acronym class="acronym">PDO</acronym>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">adapterNamespace</em> : fournit le commencement du nom
                        de la classe d&#039;adaptateur, à utiliser la place de
                        &quot;<span class="classname">Zend_Db_Adapter</span>&quot;. Utilisez ceci si vous désirez que
                         <span class="methodname">factory()</span> charge une classe non Zend.
                    </p>
                </li>
            </ul>

            <div class="example"><div class="info"><p><b>Example #5 Passer l&#039;option de gestion de la casse à la fabrique</b></p></div>
                

                <div class="example-contents"><p>
                    Vous pouvez spécifier cette option avec la constante
                    <span class="classname">Zend_Db::CASE_FOLDING</span>. Ceci correspond à l&#039;attribut
                    <b><tt>ATTR_CASE</tt></b> dans les drivers <acronym class="acronym">PDO</acronym> et IBM DB2, ce qui ajuste la casse
                    des clés dans les jeux de résultats. Les valeurs possibles possibles sont
                    <span class="classname">Zend_Db::CASE_NATURAL</span> (défaut),
                    <span class="classname">Zend_Db::CASE_UPPER</span>, et
                    <span class="classname">Zend_Db::CASE_LOWER</span>.
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Db::<span style="color: #006600;">CASE_FOLDING</span> =&gt; Zend_Db::<span style="color: #006600;">CASE_UPPER</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'options'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #0000ff;">$options</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Db2'</span>, <span style="color: #0000ff;">$params</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #6 Passer l&#039;option d&#039;auto-échappement à la fabrique</b></p></div>
                

                <div class="example-contents"><p>
                    Vous pouvez spécifier cette option avec le paramètre
                    <span class="classname">Zend_Db::AUTO_QUOTE_IDENTIFIERS</span>. Si la valeur passée est
                    <b><tt>TRUE</tt></b> (par défaut), alors les identifiants tels que les noms de
                    tables, de colonnes, ou encore les alias <acronym class="acronym">SQL</acronym>, sont échappés (délimités) dans la
                    syntaxe de la requête <acronym class="acronym">SQL</acronym> générée par l&#039;objet d&#039;adaptateur. Ceci rend
                    l&#039;utilisation de mots <acronym class="acronym">SQL</acronym> contenant des identifiant spéciaux plus simple. Dans
                    le cas de <b><tt>FALSE</tt></b>, vous devrez vous-même délimiter ces identifiant
                    avec la méthode  <span class="methodname">quoteIdentifier()</span>.
                </p></div>

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Db::<span style="color: #006600;">AUTO_QUOTE_IDENTIFIERS</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'options'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #0000ff;">$options</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <span style="color: #0000ff;">$params</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #7 Passer des options de driver PDO à la fabrique</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$pdoParams</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; PDO::<span style="color: #006600;">MYSQL_ATTR_USE_BUFFERED_QUERY</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'driver_options'</span> =&gt; <span style="color: #0000ff;">$pdoParams</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <span style="color: #0000ff;">$params</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">getConnection</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; -&gt;<span style="color: #006600;">getAttribute</span><span style="color: #66cc66;">&#40;</span>PDO::<span style="color: #006600;">MYSQL_ATTR_USE_BUFFERED_QUERY</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #8 Passer des options de sérialisation à la fabrique</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$options</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; Zend_Db::<span style="color: #006600;">ALLOW_SERIALIZATION</span> =&gt; <span style="color: #000000; font-weight: bold;">false</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$params</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'options'</span>&nbsp; &nbsp; &nbsp; &nbsp; =&gt; <span style="color: #0000ff;">$options</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <span style="color: #0000ff;">$params</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.connecting.getconnection" name="zend.db.adapter.connecting.getconnection"><div class="info"><h1 class="title">Gestion des connexions dites paresseuses</h1></div>
            

            <p class="para">
                La création d&#039;une instance d&#039;une classe d&#039;adaptateur ne crée pas physiquement
                une connexion au SGBD. L&#039;adaptateur sauvegarde les paramètres et se connectera
                physiquement à la demande, la première fois que vous aurez besoin d&#039;exécuter une
                requête. Ceci permet d&#039;assurer que la création de l&#039;instance elle-même est rapide,
                et ne coûte rien en performances. Vous pouvez donc créer une instance de
                l&#039;adaptateur, même si vous ne savez pas si vous allez l&#039;utiliser. Ainsi, si vos
                paramètres sont incorrects, il faudra attendre la tentative de connexion au SGBD
                pour le vérifier réellement.
            </p>

            <p class="para">
                Si vous voulez forcer l&#039;adaptateur à se connecter au SGBD, utilisez sa méthode
                 <span class="methodname">getConnection()</span>. Elle retournera alors un objet représentant la
                connexion, en fonction de l&#039;extension <acronym class="acronym">PHP</acronym> utilisée, ou une exception si la connexion
                n&#039;a pas été réalisée. Par exemple, si votre adaptateur utilise <acronym class="acronym">PDO</acronym>, le retour sera
                un objet <acronym class="acronym">PDO</acronym>. La connexion physique au SGBD est alors réalisée.
            </p>

            <p class="para">
                Afin de vérifier si les paramètres de connexion au SGBD sont corrects,
                surveillez les exceptions envoyées par la méthode
                 <span class="methodname">getConnection()</span>.
            </p>

            <p class="para">
                De plus, un adaptateur peut être sérialisé pour être stocké, par exemple, dans
                une variable de session. Ceci peut être utile non seulement pour l&#039;adaptateur
                lui-même, mais aussi pour les autres objets qui l&#039;agrègent, comme un objet
                <span class="classname">Zend_Db_Select</span>. Par défaut, les adaptateurs sont autorisés à
                être sérialisés, si vous ne le voulez pas, vous devez passer l&#039;option
                <span class="classname">Zend_Db::ALLOW_SERIALIZATION=false</span>, regardez l&#039;exemple
                ci-dessus. Afin de respecter le principe de connexions paresseuses, l&#039;adaptateur ne
                se reconnectera pas après la désérialisation. Vous devez appeler vous-même
                 <span class="methodname">getConnection()</span>. Vous pouvez permettre à l&#039;adaptateur de se reconnecter
                automatiquement en utilisant l&#039;option d&#039;adaptateur
                <span class="classname">Zend_Db::AUTO_RECONNECT_ON_UNSERIALIZE=true</span>.
            </p>

            <div class="example"><div class="info"><p><b>Example #9 Gérer les exceptions de connexion</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">try <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Pdo_Mysql'</span>, <span style="color: #0000ff;">$parameters</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">getConnection</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> catch <span style="color: #66cc66;">&#40;</span>Zend_Db_Adapter_Exception <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// probablement mauvais identifiants,</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// ou alors le SGBD n'est pas joignable</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> catch <span style="color: #66cc66;">&#40;</span>Zend_Exception <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// probablement que factory() n'a pas réussi à charger</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// la classe de l'adaptateur demandé</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

            </div>
        </div>
    </div>

    <div class="section" id="zend.db.adapter.example-database" name="zend.db.adapter.example-database"><div class="info"><h1 class="title">La base de données d&#039;exemple</h1></div>
        

        <p class="para">
            Dans cette documentation concernant <span class="classname">Zend_Db</span>, nous utilisons
            un exemple simple de tables pour illustrer nos exemples. Ces tables peuvent servir à
            stocker des informations sur la gestion des bugs dans une application. La base de
            données contient quatre tables :
        </p>

        <ul class="itemizedlist">
            <li class="listitem">
                <p class="para">
                    <em class="emphasis">accounts</em> correspond aux informations sur les
                    utilisateurs qui gèrent les bugs.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">products</em> enregistre les produits pour lesquels des
                    bugs vont être relevés.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">bugs</em> est la table qui contient les bugs, à savoir
                    leur état actuel, la personne ayant relevé le bug, la personne en charge de le
                    corriger, et la personne chargée de vérifier le correctif.
                </p>
            </li>

            <li class="listitem">
                <p class="para">
                    <em class="emphasis">bugs_products</em> enregistre les relations entre les
                    bugs, et les produits. C&#039;est une relation plusieurs à plusieurs car un même bug
                    peut faire partie de plusieurs produits, et un produit peut évidemment posséder
                    plusieurs bugs.
                </p>
            </li>
        </ul>

        <p class="para">
            Le pseudo-code <acronym class="acronym">SQL</acronym> suivant représente les tables de notre base de données
            d&#039;exemple. Ces tables sont utilisées aussi pour les tests unitaires automatisés de
            <span class="classname">Zend_Db</span>.
        </p>

        <div class="programlisting sql"><div class="sqlcode"><div class="sql" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #993333; font-weight: bold;">CREATE</span> <span style="color: #993333; font-weight: bold;">TABLE</span> accounts <span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; account_name&nbsp; &nbsp; &nbsp; VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">NOT</span> <span style="color: #993333; font-weight: bold;">NULL</span> <span style="color: #993333; font-weight: bold;">PRIMARY</span> <span style="color: #993333; font-weight: bold;">KEY</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #993333; font-weight: bold;">CREATE</span> <span style="color: #993333; font-weight: bold;">TABLE</span> products <span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; product_id&nbsp; &nbsp; &nbsp; &nbsp; INTEGER <span style="color: #993333; font-weight: bold;">NOT</span> <span style="color: #993333; font-weight: bold;">NULL</span> <span style="color: #993333; font-weight: bold;">PRIMARY</span> <span style="color: #993333; font-weight: bold;">KEY</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; product_name&nbsp; &nbsp; &nbsp; VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #993333; font-weight: bold;">CREATE</span> <span style="color: #993333; font-weight: bold;">TABLE</span> bugs <span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; bug_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INTEGER <span style="color: #993333; font-weight: bold;">NOT</span> <span style="color: #993333; font-weight: bold;">NULL</span> <span style="color: #993333; font-weight: bold;">PRIMARY</span> <span style="color: #993333; font-weight: bold;">KEY</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; bug_description&nbsp; &nbsp;VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; bug_status&nbsp; &nbsp; &nbsp; &nbsp; VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">20</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; reported_by&nbsp; &nbsp; &nbsp; &nbsp;VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">REFERENCES</span> accounts<span style="color: #66cc66;">&#40;</span>account_name<span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; assigned_to&nbsp; &nbsp; &nbsp; &nbsp;VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">REFERENCES</span> accounts<span style="color: #66cc66;">&#40;</span>account_name<span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; verified_by&nbsp; &nbsp; &nbsp; &nbsp;VARCHAR<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">REFERENCES</span> accounts<span style="color: #66cc66;">&#40;</span>account_name<span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #993333; font-weight: bold;">CREATE</span> <span style="color: #993333; font-weight: bold;">TABLE</span> bugs_products <span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; bug_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; INTEGER <span style="color: #993333; font-weight: bold;">NOT</span> <span style="color: #993333; font-weight: bold;">NULL</span> <span style="color: #993333; font-weight: bold;">REFERENCES</span> bugs,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; product_id&nbsp; &nbsp; &nbsp; &nbsp; INTEGER <span style="color: #993333; font-weight: bold;">NOT</span> <span style="color: #993333; font-weight: bold;">NULL</span> <span style="color: #993333; font-weight: bold;">REFERENCES</span> products,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; <span style="color: #993333; font-weight: bold;">PRIMARY</span> <span style="color: #993333; font-weight: bold;">KEY</span>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #66cc66;">&#40;</span>bug_id, product_id<span style="color: #66cc66;">&#41;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>


        <p class="para">
            Notez aussi que la table <code class="code">bugs</code> contient plusieurs référence (clés
            étrangères) vers la table <code class="code">accounts</code>. Chacune de ces clés peut référencer un
            enregistrement différent de la table <code class="code">accounts</code>, pour un bug donné.
        </p>

        <p class="para">Le diagramme qui suit illustre le modèle physique des données.</p>

        <p class="para">
            <div class="inlinemediaobject"><div class="imageobject"><img src="images/d481d625821a97b9a5eb2cec99dca50e-zend.db.adapter.example-database.png" alt="zend.db.adapter.example-database.png" width="387" height="302" /></div></div>
        </p>
    </div>

    <div class="section" id="zend.db.adapter.select" name="zend.db.adapter.select"><div class="info"><h1 class="title">Lecture de résultats de requête</h1></div>
        

        <p class="para">
            Cette section décrit des méthodes de la classe d&#039;adaptateur permettant l&#039;obtention
            de résultats suivants une requête SELECT.
        </p>

        <div class="section" id="zend.db.adapter.select.fetchall" name="zend.db.adapter.select.fetchall"><div class="info"><h1 class="title">Récupérer tous les résultats</h1></div>
            

            <p class="para">
                Vous pouvez à la fois exécuter une requête SELECT et récupérer tous ses
                résultats en une seule manipulation, grâce à la méthode
                 <span class="methodname">fetchAll()</span>.
            </p>

            <p class="para">
                Le premier paramètre de cette méthode est une chaîne représentant la requête
                SELECT à exécuter. Aussi, ce premier paramètre peut être un objet <a href="zend.db.select.html" class="link">Zend_Db_Select</a>, qui sera alors converti en une
                chaîne automatiquement.
            </p>

            <p class="para">
                Le second paramètre de de  <span class="methodname">fetchAll()</span> est un tableau de
                substitutions des éventuels jokers présents dans la syntaxe <acronym class="acronym">SQL</acronym>.
            </p>

            <div class="example"><div class="info"><p><b>Example #10 Utiliser fetchAll()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">'SELECT * FROM bugs WHERE bug_id = ?'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$sql</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetch-mode" name="zend.db.adapter.select.fetch-mode"><div class="info"><h1 class="title">Changer le mode de récupération (Fetch Mode)</h1></div>
            

            <p class="para">
                Par défaut,  <span class="methodname">fetchAll()</span> retourne un tableau d&#039;enregistrements.
                Chaque enregistrement étant un tableau associatif dont les clés sont les noms des
                colonnes <acronym class="acronym">SQL</acronym> désirées, ou leurs alias.
            </p>

            <p class="para">
                Vous pouvez spécifier un mode de récupération de résultats différent, ceci par
                la méthode  <span class="methodname">setFetchMode()</span>. Les modes supportés sont identifiés par des
                constantes :
            </p>

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">Zend_Db::FETCH_ASSOC</em> : Retourne un tableau
                        d&#039;enregistrements. Chaque enregistrement étant un tableau associatif dont
                        les clés sont les noms des colonnes <acronym class="acronym">SQL</acronym> désirées, ou leurs alias. Il s&#039;agit
                        du mode par défaut utilisé par les classes Zend_Db_Adapter.
                    </p>

                    <p class="para">
                        Notez que si votre résultat comporte plusieurs colonnes avec le même
                        nom, par exemple lors d&#039;une jointure, il ne peut y avoir qu&#039;un clé avec un
                        nom définit dans le tableau de résultat. Vous devriez toujours utiliser des
                        alias avec le mode FETCH_ASSOC.
                    </p>

                    <p class="para">
                        Les noms des clés des tableaux correspondants aux noms des colonnes
                        <acronym class="acronym">SQL</acronym> telles que retournées par le SGBD, vous pouvez spécifier la casse pour
                        ces noms, grâce à l&#039;option <span class="classname">Zend_Db::CASE_FOLDING</span>.
                        Spécifiez ceci lors de l&#039;instanciation de votre adaptateur. Voyez <a href="zend.db.adapter.html#zend.db.adapter.connecting.parameters.example1" class="xref">Passer l'option de gestion de la casse &agrave; la fabrique</a>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">Zend_Db::FETCH_NUM</em> : Retourne les enregistrements
                        dans un tableau de tableaux. Les tableaux nichés sont indexés par des
                        entiers correspondants à la position du champ dans la syntaxe <acronym class="acronym">SQL</acronym>
                        SELECT.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">Zend_Db::FETCH_BOTH</em> : Retourne les enregistrements
                        dans un tableau de tableaux. Les tableaux nichés sont indexés à la fois
                        numériquement et lexicalement. C&#039;est un mode qui réunit FETCH_ASSOC et
                        FETCH_NUM. Ainsi, vous avez deux fois plus d&#039;enregistrements, chacun d&#039;entre
                        eux étant doublé.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">Zend_Db::FETCH_COLUMN</em>: Retourne les
                        enregistrements dans un tableau de valeurs. Les valeurs correspondent à une
                        des colonnes utilisées dans la requête <acronym class="acronym">SQL</acronym> SELECT. Par défaut, il s&#039;agit de
                        la colonne à l&#039;index 0.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        <em class="emphasis">Zend_Db::FETCH_OBJ</em> : Retourne les enregistrements
                        dans un tableau d&#039;objets. La classe de ces objets par défaut est la classe
                        intégrée à <acronym class="acronym">PHP</acronym> : <code class="code">stdClass</code>. Les colonnes des enregistrements
                        sont représentées par les propriétés publiques des objets.
                    </p>
                </li>
            </ul>

            <div class="example"><div class="info"><p><b>Example #11 Utiliser setFetchMode()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">setFetchMode</span><span style="color: #66cc66;">&#40;</span>Zend_Db::<span style="color: #006600;">FETCH_OBJ</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchAll</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'SELECT * FROM bugs WHERE bug_id = ?'</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// $result est un tableau d'objets</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#93;</span>-&gt;<span style="color: #006600;">bug_description</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetchassoc" name="zend.db.adapter.select.fetchassoc"><div class="info"><h1 class="title">Récupérer un enregistrement comme tableau associatif</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">fetchAssoc()</span> retourne des enregistrements sous
                forme de tableau de tableaux associatifs, quelque soit la valeur de &quot;fetch mode&quot;
                en utilisant la première colonne comme index.
            </p>

            <div class="example"><div class="info"><p><b>Example #12 Utiliser f <span class="methodname">etchAssoc()</span></b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">setFetchMode</span><span style="color: #66cc66;">&#40;</span>Zend_Db::<span style="color: #006600;">FETCH_OBJ</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchAssoc</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'SELECT bug_id, bug_description, bug_status FROM bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// $result est un tableau de tableaux associatifs</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'bug_description'</span><span style="color: #66cc66;">&#93;</span>; <span style="color: #808080; font-style: italic;">// Description du bug #2</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'bug_description'</span><span style="color: #66cc66;">&#93;</span>; <span style="color: #808080; font-style: italic;">// Description du bug #1</span></div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetchcol" name="zend.db.adapter.select.fetchcol"><div class="info"><h1 class="title">Récupérer une seule colonne d&#039;un enregistrement</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">fetchCol()</span> retourne les enregistrements dans un
                tableau de valeurs. Les valeurs correspondent à une des colonnes utilisées dans la
                requête <acronym class="acronym">SQL</acronym> SELECT, par défaut : la première. Toute autre colonne sera ignorée. Si
                vous avez besoin de retourner une autre colonne, voyez <a href="zend.db.statement.html#zend.db.statement.fetching.fetchcolumn" class="xref">R&eacute;cup&eacute;rer une colonne simple depuis un statement ex&eacute;cut&eacute;</a>. Cette méthode est indépendante
                de la valeur de &quot;fetch mode&quot;.
            </p>

            <div class="example"><div class="info"><p><b>Example #13 Utiliser fetchCol()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">setFetchMode</span><span style="color: #66cc66;">&#40;</span>Zend_Db::<span style="color: #006600;">FETCH_OBJ</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">'SELECT bug_description, bug_id FROM bugs WHERE bug_id = ?'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchCol</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$sql</span>, <span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Contient bug_description ; bug_id n'est pas retourné</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #66cc66;">&#93;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetchpairs" name="zend.db.adapter.select.fetchpairs"><div class="info"><h1 class="title">Récupérer des paires Clé-Valeur d&#039;enregistrements</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">fetchPairs()</span> retourne un tableau de paires
                clés/valeurs. La clé est le résultat de la première colonne sélectionnée dans la
                requête, la valeur est le résultat de la deuxième colonne sélectionnée dans la
                requête. Il est donc inutile de sélectionner plus de deux colonnes avec cette
                méthode. De même, vous devez sélectionner exactement deux colonnes avec cette
                méthode, pas moins. Si des clés ont des doublons, alors ils seront écrasés.
            </p>

            <p class="para">
                Vous devriez réfléchir votre requête SELECT de manière à ce que la première
                colonne sélectionnée, correspondant à la clé du tableau de résultat, soit unique
                (une clé primaire par exemple). Cette méthode est indépendante de &quot;fetch mode&quot;
                éventuellement précédemment défini.
            </p>

            <div class="example"><div class="info"><p><b>Example #14 Utilisation de fetchPairs()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">setFetchMode</span><span style="color: #66cc66;">&#40;</span>Zend_Db::<span style="color: #006600;">FETCH_OBJ</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchPairs</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'SELECT bug_id, bug_status FROM bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span><span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span>; <span style="color: #808080; font-style: italic;">// le bug_status correspondant au bug_id numéro 2</span></div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetchrow" name="zend.db.adapter.select.fetchrow"><div class="info"><h1 class="title">Récupérer un seul enregistrement complet</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">fetchRow()</span> retourne un et un seul enregistrement (le
                premier si plusieurs correspondent), en fonction de &quot;fetch mode&quot; que vous aurez
                précédemment défini. Cette méthode ressemble donc à  <span class="methodname">fetchAll()</span> si ce
                n&#039;est qu&#039;elle ne retournera jamais plus d&#039;un seul enregistrement. Arrangez vous donc
                pour que votre SELECT possède une clause WHERE sur une clé primaire.
            </p>

            <div class="example"><div class="info"><p><b>Example #15 Utiliser fetchRow()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">setFetchMode</span><span style="color: #66cc66;">&#40;</span>Zend_Db::<span style="color: #006600;">FETCH_OBJ</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'SELECT * FROM bugs WHERE bug_id = 2'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Ce résultat sera un objet, car le fetch mode en a décidé ainsi</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span>-&gt;<span style="color: #006600;">bug_description</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.select.fetchone" name="zend.db.adapter.select.fetchone"><div class="info"><h1 class="title">Récupérer une colonne d&#039;un enregistrement</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">fetchOne()</span> est une combinaison des méthodes
                 <span class="methodname">fetchRow()</span> et  <span class="methodname">fetchCol()</span>, ainsi elle ne retourne que la
                première colonne, du premier enregistrement retourné. La valeur de retour est donc
                une chaîne de caractères. Toute requête retournant plusieurs colonnes et/ou
                plusieurs résultats est donc inutile avec cette méthode.
            </p>

            <div class="example"><div class="info"><p><b>Example #16 Utiliser fetchOne()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">fetchOne</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'SELECT bug_status FROM bugs WHERE bug_id = 2'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ceci est une chaine</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$result</span>;</div></li></ol></div></div></div>

            </div>
        </div>
    </div>

    <div class="section" id="zend.db.adapter.write" name="zend.db.adapter.write"><div class="info"><h1 class="title">Effectuer des changements dans la base de données</h1></div>
        

        <p class="para">
            Il est bien entendu possible d&#039;utiliser la classe d&#039;adaptateur pour effectuer des
            changements dans vos données. Cette section décrit les manières de procéder.
        </p>

        <div class="section" id="zend.db.adapter.write.insert" name="zend.db.adapter.write.insert"><div class="info"><h1 class="title">Insérer des données</h1></div>
            

            <p class="para">
                Vous pouvez ajouter de nouveaux enregistrements dans une table, grâce à la
                méthode  <span class="methodname">insert()</span>. Son premier paramètre est une chaîne qui représente
                le nom de la table ciblée, le second paramètre est un tableau associatif liant les
                noms des colonnes de la table, aux valeurs souhaitées.
            </p>

            <div class="example"><div class="info"><p><b>Example #17 Insertion dans une table</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'created_on'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'2007-03-22'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_description'</span> =&gt; <span style="color: #ff0000;">'Something wrong'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_status'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'NEW'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">insert</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Les colonnes non citées dans le tableau associatif sont laissées telles
                quelles. Ainsi, si le SGBD possède une valeur DEFAULT pour les colonnes concernées,
                celle-ci sera utilisée, autrement, NULL sera utilisé.
            </p>

            <p class="para">
                Par défaut, les valeurs insérées avec cette méthode sont automatiquement
                échappées. Ceci pour des raisons de sécurité, vous n&#039;avez donc pas besoin de vous
                occuper de ce point là.
            </p>

            <p class="para">
                Si vous avez besoin d&#039;écrire de la syntaxe <acronym class="acronym">SQL</acronym>, comme des mots réservés, des
                noms de fonctions <acronym class="acronym">SQL</acronym>, vous voulez que ceux-ci ne soient pas échappés, et ne soient
                pas traités comme de vulgaires chaînes de caractères, mais plutôt comme des
                expressions. Pour ceci, vous devriez passer ces valeurs dans votre tableau de
                données, en tant qu&#039;objets de type <span class="classname">Zend_Db_Expr</span> au lieu de
                chaînes de caractères banales.
            </p>

            <div class="example"><div class="info"><p><b>Example #18 Insérer des expressions dans une table</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'created_on'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #000000; font-weight: bold;">new</span> Zend_Db_Expr<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'CURDATE()'</span><span style="color: #66cc66;">&#41;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_description'</span> =&gt; <span style="color: #ff0000;">'Something wrong'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_status'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'NEW'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">insert</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.write.lastinsertid" name="zend.db.adapter.write.lastinsertid"><div class="info"><h1 class="title">Récupérer une valeur générée</h1></div>
            

            <p class="para">
                Certains SGBDs supportent les clé primaires auto-incrémentées. Une table qui
                utilise un tel procédé génère la valeur de la clé automatiquement lors d&#039;une
                insertion (INSERT). La valeur de retour de la méthode  <span class="methodname">insert()</span>
                <em class="emphasis">n&#039;est pas</em> le dernier ID inséré car la table peut ne pas avoir
                de clé auto-incrémentée. La valeur de retour est le nombres d&#039;enregistrements
                affectés (théoriquement 1).
            </p>

            <p class="para">
                Si votre table a été définie avec une clé auto-incrémentée, alors vous pouvez
                appeler la méthode  <span class="methodname">lastInsertId()</span> après une opération d&#039;insertion.
                Cette méthode retourne la valeur auto-incrémentée, générée dans le cadre de la
                connexion au SGBD.
            </p>

            <div class="example"><div class="info"><p><b>Example #19 Utiliser lastInsertId() pour les clés auto-incrémentées</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">insert</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// retourne la dernière valeur générée par la clé auto-incrémentée</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$id</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">lastInsertId</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Certains SGBD supporte un objet de séquence, qui sert à générer des valeurs
                uniques qui vont servir pour les clé primaires. Pour supporter ce procédé, la
                méthode  <span class="methodname">lastInsertId()</span> accepte deux paramètres optionnels (chaînes de
                caractères). Ces paramètres nomment la table et la colonne en supposant que vous
                ayez respecté la convention qui définit que la séquence est nommée en utilisant le
                nom de la table et des colonnes utilisées, avec le suffixe &quot;_seq&quot;. Ces conventions
                sont celles de PostgreSQL pour les colonnes de type SERIAL. Par exemple, une table
                &quot;bugs&quot; avec une clé primaire &quot;bug_id&quot; utilisera une séquence nommée
                &quot;bugs_bug_id_seq&quot;.
            </p>

            <div class="example"><div class="info"><p><b>Example #20 Utiliser lastInsertId() avec une séquence</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">insert</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// retourne la dernière valeur générée par la séquence 'bugs_bug_id_seq'.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$id</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">lastInsertId</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #ff0000;">'bug_id'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// ceci retourne la dernière valeur générée par la séquence 'bugs_seq'.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$id</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">lastInsertId</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Si le nom de votre objet de séquence ne suit pas ces conventions de nommage,
                utilisez alors  <span class="methodname">lastSequenceId()</span>. Cette méthode prend un paramètre qui
                nomme la séquence explicitement.
            </p>

            <div class="example"><div class="info"><p><b>Example #21 Utilisation de lastSequenceId()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">insert</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// retourne la dernière valeur générée par la séquence 'bugs_id_gen'.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$id</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">lastSequenceId</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs_id_gen'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Pour les SGBDs ne supportant pas les séquences, comme MySQL, Microsoft <acronym class="acronym">SQL</acronym>
                Server, et SQLite, les arguments passés à la méthode  <span class="methodname">lastInsertId()</span>
                sont ignorés. La valeur retournée est la dernière valeur générée pour la dernière
                requête INSERT, quelque soit la table concernée (pour cette connexion). Aussi, pour
                ces SGBDs, la méthode  <span class="methodname">lastSequenceId()</span> retournera toujours
                <b><tt>NULL</tt></b>.
            </p>

            <blockquote><p><b class="note">Note</b>: <span class="info"><b>Pourquoi ne pas utiliser &quot;SELECT MAX(id) FROM table&quot;?</b><br /></span>
                

                
                    Quelques fois, cette requête retourne la valeur la plus récente de clé
                    primaire insérée dans la table en question. Cependant, cette technique n&#039;est pas
                    pertinente dans un environnement où beaucoup de clients insèrent beaucoup de
                    données dans une même table. Il est donc possible qu&#039;un client insère une donnée
                    entre le moment où la dernière insertion est effectuée, et l&#039;appel de MAX(id),
                    aboutissant ainsi à un résultat erroné. Il est très difficile de se rendre
                    compte d&#039;un tel comportement.
                <br />

                
                    Utiliser un mode d&#039;isolation transactionnelle très élevé, comme
                    &quot;repeatable read&quot; peut mitiger plus ou moins les risques, mais certains SGBDs ne
                    supportent pas ce mode de transactions.
                <br />

                
                    De plus, utiliser une requête du type &quot;MAX(id)+1&quot; pour générer une
                    nouvelle valeur de clé primaire n&#039;est pas sécurisé non plus, car deux client
                    peuvent se connecter simultanément et créer des effets indésirables.
                <br />

                
                    Tous les SGBDs fournissent un mécanisme de génération de valeurs uniques,
                    et une méthode pour les récupérer. Ces mécanismes travaillent en dehors du mode
                    transactionnel, et empêchent ainsi deux clients de générer la même valeur, ou de
                    &quot;se marcher dessus&quot;.
                <br />
            </p></blockquote>
        </div>

        <div class="section" id="zend.db.adapter.write.update" name="zend.db.adapter.write.update"><div class="info"><h1 class="title">Mettre à jour des données</h1></div>
            

            <p class="para">
                Vous pouvez mettre à jour des données dans une table en utilisant la méthode
                 <span class="methodname">update()</span> de l&#039;adaptateur. Cette méthode accepte trois arguments :
                le premier est le nom de la table, le deuxième est un tableau faisant correspondre
                les noms des colonnes <acronym class="acronym">SQL</acronym> à leurs valeurs désirées.
            </p>

            <p class="para">
                Les valeurs dans ce tableau sont traitées comme des chaînes. Voyez <a href="zend.db.adapter.html#zend.db.adapter.write.insert" class="xref">Ins&eacute;rer des donn&eacute;es</a> pour plus d&#039;informations sur la gestion
                des expressions <acronym class="acronym">SQL</acronym> dans ce tableau.
            </p>

            <p class="para">
                Le troisième argument est une chaîne contenant l&#039;expression <acronym class="acronym">SQL</acronym> utilisée comme
                critère pour la mise à jour des données dans la table. Les valeurs et les arguments
                dans ce paramètre ne sont pas échappés pour vous. Vous devez donc vous assurer de
                l&#039;éventuel bon échappement des caractères. Voyez <a href="zend.db.adapter.html#zend.db.adapter.quoting" class="xref">&Eacute;chapper des valeurs ou des identifiants</a> pour plus d&#039;informations.
            </p>

            <p class="para">
                La valeur de retour de cette méthode est le nombre d&#039;enregistrements affectés
                par l&#039;opération de mise à jour (UPDATE).
            </p>

            <div class="example"><div class="info"><p><b>Example #22 Mettre à jour des enregistrements</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'updated_on'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'2007-03-23'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_status'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'FIXED'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$n</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">update</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #ff0000;">'bug_id = 2'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Si vous oubliez le troisième paramètre, alors tous les enregistrements de la
                table sont mis à jour avec les valeurs spécifiées dans le tableau de données.
            </p>

            <p class="para">
                Si vous spécifiez un tableau de chaîne en tant que troisième paramètre, alors
                ces chaînes sont jointes entre elles avec une opération <b><tt>AND</tt></b>.
            </p>

            <p class="para">
                Si vous fournissez un tableau de tableaux en tant que troisième argument, les
                valeurs seront automatiquement échappées dans les clés. Elles seront ensuite
                jointes ensemble, séparées par des opérateurs <b><tt>AND</tt></b>.
            </p>

            <div class="example"><div class="info"><p><b>Example #23 Mettre à jour des enregistrements avec un tableau de données</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'updated_on'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'2007-03-23'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_status'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'FIXED'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#93;</span> = <span style="color: #ff0000;">&quot;reported_by = 'goofy'&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#93;</span> = <span style="color: #ff0000;">&quot;bug_status = 'OPEN'&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$n</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">update</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// la requête SQL executée est :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; UPDATE &quot;bugs&quot; SET &quot;update_on&quot; = '2007-03-23', &quot;bug_status&quot; = 'FIXED'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; WHERE (&quot;reported_by&quot; = 'goofy') AND (&quot;bug_status&quot; = 'OPEN')</span></div></li></ol></div></div></div>

            </div>

            <div class="example"><div class="info"><p><b>Example #24 UMettre à jour des enregistrements avec un tableau de tableaux</b></p></div>
                
                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$data</span> = <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'updated_on'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'2007-03-23'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'bug_status'</span>&nbsp; &nbsp; &nbsp; =&gt; <span style="color: #ff0000;">'FIXED'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'reported_by = ?'</span><span style="color: #66cc66;">&#93;</span> = <span style="color: #ff0000;">'goofy'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#91;</span><span style="color: #ff0000;">'bug_status = ?'</span><span style="color: #66cc66;">&#93;</span>&nbsp; = <span style="color: #ff0000;">'OPEN'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$n</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">update</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #0000ff;">$data</span>, <span style="color: #0000ff;">$where</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// la requête SQL executée est :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; UPDATE &quot;bugs&quot; SET &quot;update_on&quot; = '2007-03-23', &quot;bug_status&quot; = 'FIXED'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">//&nbsp; WHERE (&quot;reported_by&quot; = 'goofy') AND (&quot;bug_status&quot; = 'OPEN')</span></div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.write.delete" name="zend.db.adapter.write.delete"><div class="info"><h1 class="title">Supprimer des enregistrements</h1></div>
            

            <p class="para">
                Il est possible de supprimer des enregistrements dans une table. La méthode
                 <span class="methodname">delete()</span> est faite pour cela. Elle accepte deux paramètres, le premier
                est une chaîne désignant la table.
            </p>

            <p class="para">
                Le second paramètre est une chaîne contenant l&#039;expression <acronym class="acronym">SQL</acronym> utilisée comme
                critère pour effacer les enregistrements. Les valeurs de cette expression de sont
                pas échappées automatiquement, vous devez donc vous en occuper le cas échéant. Voyez
                <a href="zend.db.adapter.html#zend.db.adapter.quoting" class="xref">&Eacute;chapper des valeurs ou des identifiants</a> pour les méthodes concernant
                l&#039;échappement.
            </p>

            <p class="para">
                La valeur retournée par la méthode  <span class="methodname">delete()</span> est le nombre
                d&#039;enregistrements affectés (effacés).
            </p>

            <div class="example"><div class="info"><p><b>Example #25 Supprimer des enregistrements</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$n</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">delete</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'bugs'</span>, <span style="color: #ff0000;">'bug_id = 3'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                Si vous ne spécifiez pas le second paramètres, tous les enregistrements de la
                table seront alors supprimés.
            </p>

            <p class="para">
                Si le second paramètre est un tableau de chaînes, alors celles ci seront
                jointe en une expression <acronym class="acronym">SQL</acronym>, séparées par l&#039;opérateur
                <b><tt>AND</tt></b>.
            </p>

            <p class="para">
                Si vous fournissez un tableau de tableaux en tant que troisième argument, les
                valeurs seront automatiquement échappées dans les clés. Elles seront ensuite
                jointes ensemble, séparées par des opérateurs <b><tt>AND</tt></b>.
            </p>
        </div>
    </div>

    <div class="section" id="zend.db.adapter.quoting" name="zend.db.adapter.quoting"><div class="info"><h1 class="title">Échapper des valeurs ou des identifiants</h1></div>
        

        <p class="para">
            Lorsque vous envoyez des requêtes SQL au SGBD, il est souvent nécessaire d&#039;y
            inclure des paramètres dynamiques, PHP. Ceci est risqué car si un des paramètres
            contient certains caractères, comme l&#039;apostrophe (&#039;), alors la requête résultante risque
            d&#039;être mal formée. Par exemple, notez le caractère indésirable dans la requête
            suivante :
            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$name</span> = <span style="color: #ff0000;">&quot;O'Reilly&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">&quot;SELECT * FROM bugs WHERE reported_by = '$name'&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$sql</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SELECT * FROM bugs WHERE reported_by = 'O'Reilly'</span></div></li></ol></div></div></div>

        </p>

        <p class="para">
            Pire encore est le cas où de telles erreurs <acronym class="acronym">SQL</acronym> peuvent être utilisées
            délibérément par une personne afin de manipuler la logique de votre requête. Si une
            personne peut manipuler un paramètre de votre requête, par exemple via un paramètre <acronym class="acronym">HTTP</acronym>
            ou une autre méthode, alors il peut y avoir une fuite de données, voire même une
            corruption totale de votre base de données. Cette technique très préoccupante de
            violation de la sécurité d&#039;un SGBD, est appelée &quot;injection <acronym class="acronym">SQL</acronym>&quot; (voyez <a href="http://en.wikipedia.org/wiki/SQL_Injection" class="link external">&raquo; http://en.wikipedia.org/wiki/SQL_Injection</a>).
        </p>

        <p class="para">
            La classe Zend_Db Adapter possède des méthodes adaptées pour vous aider à faire
            face à de telles vulnérabilités. La solution proposée est l&#039;échappement de tels
            caractères (comme la &quot;quote&quot; = &#039;) dans les valeurs <acronym class="acronym">PHP</acronym> avant leur passage dans la chaîne
            de requête. Ceci vous protège de l&#039;insertion malveillante ou involontaires, de
            caractères spéciaux dans les variables <acronym class="acronym">PHP</acronym> faisant partie d&#039;une requête <acronym class="acronym">SQL</acronym>.
        </p>

        <div class="section" id="zend.db.adapter.quoting.quote" name="zend.db.adapter.quoting.quote"><div class="info"><h1 class="title">Utilisation de quote()</h1></div>
            

            <p class="para">
                La méthode  <span class="methodname">quote()</span> accepte un seul paramètre, une chaîne de
                caractère. Elle retourne une chaîne dont les caractères spéciaux ont été échappés
                d&#039;une manière convenable en fonction du SGBD sous-jacent. De plus, la chaîne
                échappée est entourée d&#039;apostrophes (&quot;<code class="code">&#039;</code>&quot;).C&#039;est la valeur standard de
                délimitations des chaînes en <acronym class="acronym">SQL</acronym>.
            </p>

            <div class="example"><div class="info"><p><b>Example #26 Utiliser quote()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$name</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">quote</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;O'Reilly&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$name</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// 'O\'Reilly'</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">&quot;SELECT * FROM bugs WHERE reported_by = $name&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$sql</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SELECT * FROM bugs WHERE reported_by = 'O\'Reilly'</span></div></li></ol></div></div></div>

            </div>

            <p class="para">
                Notez que la valeur de retour contient les apostrophes de délimitation autour
                de la chaîne. Ceci est différent de certaines fonctions qui se contentent juste
                d&#039;échapper les caractères spéciaux, telle que <a href="http://www.php.net/mysqli_real_escape_string" class="link external">&raquo; mysql_real_escape_string()</a>.
            </p>

            <p class="para">
                Certaines valeurs en revanche n&#039;ont pas besoin d&#039;être délimitées. Certains
                SGBDs n&#039;acceptent pas que les valeurs correspondant à des champs de type entier,
                soient délimitées. Autrement dit, l&#039;exemple suivant est erroné dans certaines
                implémentations de SQL. Nous supposons <code class="code">intColumn</code> ayant un type SQL
                <b><tt>INTEGER</tt></b> : <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">SELECT * FROM atable WHERE intColumn = <span style="color: #ff0000;">'123'</span></div></li></ol></div></div></div>
</p>

            <p class="para">
                Le second paramètre optionnel de  <span class="methodname">quote()</span> permet de spécifier un
                type <acronym class="acronym">SQL</acronym>.
            </p>

            <div class="example"><div class="info"><p><b>Example #27 Utiliser quote() avec un type SQL</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$value</span> = <span style="color: #ff0000;">'1234'</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">'SELECT * FROM atable WHERE intColumn = '</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp;. <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">quote</span><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$value</span>, <span style="color: #ff0000;">'INTEGER'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            <p class="para">
                De plus, chaque classe Zend_Db_Adapter possèdent des constantes représentant
                les différents type <acronym class="acronym">SQL</acronym> des SGBDs respectifs qu&#039;elles représentent. Ainsi, les
                constantes <span class="classname">Zend_Db::INT_TYPE</span>,
                <span class="classname">Zend_Db::BIGINT_TYPE</span>, et
                <span class="classname">Zend_Db::FLOAT_TYPE</span> peuvent vous permettre d&#039;écrire un code
                portable entre différents SGBDs.
            </p>

            <p class="para">
                Zend_Db_Table fournit les types <acronym class="acronym">SQL</acronym> à  <span class="methodname">quote()</span> automatiquement en
                fonction des colonnes utilisées par la table référencée.
            </p>
        </div>

        <div class="section" id="zend.db.adapter.quoting.quote-into" name="zend.db.adapter.quoting.quote-into"><div class="info"><h1 class="title">Utilisation de quoteInto()</h1></div>
            

            <p class="para">
                Une autre manière est d&#039;échapper une expression <acronym class="acronym">SQL</acronym> contenant une variable
                <acronym class="acronym">PHP</acronym>. Vous pouvez utiliser  <span class="methodname">quoteInto()</span> pour cela. Cette méthode accepte
                trois arguments. Le premier est la chaîne représentant l&#039;expression <acronym class="acronym">SQL</acronym> dont les
                paramètres variables sont remplacés par un joker(<code class="code">?</code>), et le second
                argument est la variable <acronym class="acronym">PHP</acronym> à utiliser pour le remplacement du joker.
            </p>

            <p class="para">
                Le joker est le même symbole que celui utilisé par beaucoup de SGBDs pour la
                substitution de paramètre dans une requête préparée. <span class="methodname">quoteInto()</span> ne fait
                qu&#039;émuler ce comportement : la méthode ne fait que remplacer le joker par la
                valeur <acronym class="acronym">PHP</acronym>, en lui appliquant la méthode <code class="code">quote</code>. De vrais paramètres de
                requêtes préparées conservent une réelle isolation entre la requête et ses
                paramètres.
            </p>

            <div class="example"><div class="info"><p><b>Example #28 Utiliser quoteInto()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">quoteInto</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;SELECT * FROM bugs WHERE reported_by = ?&quot;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">&quot;O'Reilly&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$sql</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SELECT * FROM bugs WHERE reported_by = 'O\'Reilly'</span></div></li></ol></div></div></div>

            </div>

            <p class="para">
                Le troisième paramètre optionnel s&#039;utilise comme avec la méthode
                <code class="code">quote</code>. Il sert à spécifier un type <acronym class="acronym">SQL</acronym>, les types numériques ne sont
                pas délimités.
            </p>

            <div class="example"><div class="info"><p><b>Example #29 Utiliser quoteInto() avec un type SQL</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">quoteInto</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;SELECT * FROM bugs WHERE bug_id = ?&quot;</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'1234'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #ff0000;">'INTEGER'</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$sql</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SELECT * FROM bugs WHERE reported_by = 1234</span></div></li></ol></div></div></div>

            </div>
        </div>

        <div class="section" id="zend.db.adapter.quoting.quote-identifier" name="zend.db.adapter.quoting.quote-identifier"><div class="info"><h1 class="title">Utilisation de quoteIdentifier()</h1></div>
            

            <p class="para">
                Les valeurs ne sont pas les seuls données qui peuvent être dynamiques dans une
                requête <acronym class="acronym">SQL</acronym>,et donc passées par des variables <acronym class="acronym">PHP</acronym>. Les noms des tables, des
                colonnes, ou tout autre identifiant <acronym class="acronym">SQL</acronym> spécial de la requête peuvent aussi être
                dynamiques. En général, les identifiant spéciaux d&#039;une requête ont une syntaxe
                identique à celle des variables <acronym class="acronym">PHP</acronym> : pas d&#039;espaces dans les noms, certains
                autres caractères interdits, la ponctuation est interdite, etc... Aussi, les
                identifiants ne peuvent valoir certaines valeurs de mots réservés : une table
                ne peut s&#039;appeler &quot;FROM&quot;. Il se peut donc que vous ayez besoin aussi d&#039;échapper des
                paramètres voués à être substitués à des identifiant dans la requête <acronym class="acronym">SQL</acronym>, et non
                plus à des valeurs.
            </p>

            <p class="para">
                Le langage <acronym class="acronym">SQL</acronym> possède une caractéristique appelée <em class="emphasis">identifiant
                délimités</em>. Si vous entourez un identifiant <acronym class="acronym">SQL</acronym> dans un type spécial de
                délimiteurs, alors vous pouvez écrire des requêtes qui auraient été invalides
                autrement. Ainsi, vous pouvez inclure des espaces, de la ponctuation ou des
                caractères internationaux dans vos identifiant, et aussi utiliser des mots
                réservés.
            </p>

            <p class="para">
                La méthode  <span class="methodname">quoteIdentifier()</span> fonctionne comme
                 <span class="methodname">quote()</span>, mais elle utilise un caractère de délimitation spécial, en
                fonction du SGBD sous-jacent. Par exemple, le standard <acronym class="acronym">SQL</acronym> spécifie des doubles
                quotes (<code class="code">&quot;</code>) et beaucoup de SGBDs utilisent ceci. MySQL utilise les
                apostrophes inverses (back-quotes) (<code class="code">`</code>) par défaut. Les caractères
                spéciaux sont aussi échappés.
            </p>

            <div class="example"><div class="info"><p><b>Example #30 Utiliser quoteIdentifier()</b></p></div>
                

                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// nous possédons une table ayant un nom correspondant</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// à un mot reservé en SQL</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$tableName</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">quoteIdentifier</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">&quot;order&quot;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$sql</span> = <span style="color: #ff0000;">&quot;SELECT * FROM $tableName&quot;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$sql</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// SELECT * FROM &quot;order&quot;</span></div></li></ol></div></div></div>

            </div>

            <p class="para">
                Les identifiant <acronym class="acronym">SQL</acronym> délimités sont sensibles à la casse. Vous devriez toujours
                utiliser la casse telle qu&#039;elle est utilisée dans votre base de données (nom des
                tables, des colonnes ...).
            </p>

            <p class="para">
                Dans les cas où le <acronym class="acronym">SQL</acronym> est généré à l&#039;intérieur des classes
                <span class="classname">Zend_Db</span>, alors les identifiant <acronym class="acronym">SQL</acronym> seront automatiquement
                échappés. Vous pouvez changer ce comportement avec l&#039;option
                <span class="classname">Zend_Db::AUTO_QUOTE_IDENTIFIERS</span>.Spécifiez la lors de
                l&#039;instanciation de l&#039;adaptateur. Voyez <a href="zend.db.adapter.html#zend.db.adapter.connecting.parameters.example2" class="xref">Passer l'option d'auto-&eacute;chappement &agrave; la fabrique</a>.
            </p>
        </div>
    </div>

    <div class="section" id="zend.db.adapter.transactions" name="zend.db.adapter.transactions"><div class="info"><h1 class="title">Gérer les transactions dans une base de données</h1></div>
        

        <p class="para">
            Les bases de données définissent les transactions comme étant des unités logiques
            de travail qui peuvent êtres validées (&quot;commit&quot;) ou annulées (&quot;rollback&quot;) en tant qu&#039;une
            seule opération, même sur de multiples tables. Toutes les requêtes aux bases de données
            sont considérées comme faisant partie d&#039;une transaction, même si le driver de base de
            données fait ceci implicitement. Ceci s&#039;appelle le mode
            <em class="emphasis">auto-commit</em>, dans lequel le driver de base de données créer une
            transaction pour chaque requête exécutée et la valide. Par défaut toutes les classes
            <span class="classname">Zend_Db_Adapter</span> fonctionnent en mode auto-commit.
        </p>

        <p class="para">
            Vous pouvez manuellement spécifier lorsque vous voulez démarrer une transaction.
            Vous contrôler ainsi combien de requêtes doivent y être exécutées, et valider ou annuler
            ce groupe de requêtes. Utilisez  <span class="methodname">beginTransaction()</span> pour démarrer une
            transaction. Toutes les requêtes suivantes seront alors exécutées dans cette transaction
            avant que vous ne l&#039;annuliez, ou validiez.
        </p>

        <p class="para">
            Pour terminer une transaction, utilisez les méthodes  <span class="methodname">commit()</span> ou
             <span class="methodname">rollBack()</span>.  <span class="methodname">commit()</span> validera et appliquera les changements de
            la transaction au SGBD, ils deviendront alors visibles dans les autres
            transactions.
        </p>

        <p class="para">
             <span class="methodname">rollBack()</span> fait le contraire : elle annule les changements qu&#039;ont
            générés les requêtes dans la transaction. L&#039;annulation n&#039;a aucun effet sur les
            changements qui ont été opérés par d&#039;autres transactions parallèles.
        </p>

        <p class="para">
            Après qu&#039;une transaction soit terminées, <span class="classname">Zend_Db_Adapter</span>
            retourne en mode auto-commit jusqu&#039;à un nouvel appel à
             <span class="methodname">beginTransaction()</span>.
        </p>

        <div class="example"><div class="info"><p><b>Example #31 Manipuler les transactions pour assurer l&#039;intégrité de la logique</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #808080; font-style: italic;">// Démarre explicitement une transaction.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">beginTransaction</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">try <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Essaye d'executer une ou plusieurs requêtes :</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">query</span><span style="color: #66cc66;">&#40;</span>...<span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">query</span><span style="color: #66cc66;">&#40;</span>...<span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">query</span><span style="color: #66cc66;">&#40;</span>...<span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Si toutes ont réussi, valide les changements en une seule passe.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">commit</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> catch <span style="color: #66cc66;">&#40;</span>Exception <span style="color: #0000ff;">$e</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Si une des requête s'est mal déroulée, alors nous voulons</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// annuler les changements de toutes les requêtes faisant partie</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// de la transaction, même celles qui se sont bien déroulées.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// Tous les changements sont annulés d'un seul coup.</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">rollBack</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <a href="http://www.php.net/echo"><span style="color: #000066;">echo</span></a> <span style="color: #0000ff;">$e</span>-&gt;<span style="color: #006600;">getMessage</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.adapter.list-describe" name="zend.db.adapter.list-describe"><div class="info"><h1 class="title">Lister et décrire les tables</h1></div>
        

        <p class="para">
            La méthode  <span class="methodname">listTables()</span> retourne un tableau de chaînes décrivant les
            tables de la base de données courante.
        </p>

        <p class="para">
            La méthode  <span class="methodname">describeTable()</span> retourne un tableau associatif de
            métadonnées sur une table. Spécifiez en le nom en paramètre. Le second paramètre est
            optionnel et définit la base de données à utiliser, comme par exemple si aucune n&#039;a été
            sélectionnée précédemment.
        </p>

        <p class="para">
            Les clés de ce tableau représentent les noms des colonnes, les valeurs sont un
            tableau avec les clés suivantes :
        </p>

        <table class="doctable table"><div class="info"><caption><b>Champs de métadonnées retournés par describeTable()</b></caption></div>
            

            
                <thead valign="middle">
                    <tr valign="middle">
                        <th>clé</th>
                        <th>type</th>
                        <th>description</th>
                    </tr>

                </thead>


                <tbody valign="middle" class="tbody">
                    <tr valign="middle">
                        <td align="left"><b><tt>SCHEMA_NAME</tt></b></td>
                        <td align="left">(chaîne)</td>
                        <td align="left">Nom de la base de données dans laquelle la table existe.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>TABLE_NAME</tt></b></td>
                        <td align="left">(chaîne)</td>
                        <td align="left">Nom de la table dans laquelle la colonne existe.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>COLUMN_NAME</tt></b></td>
                        <td align="left">(chaîne)</td>
                        <td align="left">Nom de la colonne.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>COLUMN_POSITION</tt></b></td>
                        <td align="left">(entier)</td>
                        <td align="left">Position de la colonne dans la table.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>DATA_TYPE</tt></b></td>
                        <td align="left">(chaîne)</td>
                        <td align="left">Nom du type de données tel que renvoyé par le <acronym class="acronym">SGBD</acronym>.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>DEFAULT</tt></b></td>
                        <td align="left">(chaîne)</td>
                        <td align="left">Valeur par défaut de la colonne, si une existe.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>NULLABLE</tt></b></td>
                        <td align="left">(booléen)</td>
                        <td align="left"><b><tt>TRUE</tt></b> si la colonne accepte la valeur <acronym class="acronym">SQL</acronym>
                        &#039;<b><tt>NULL</tt></b>&#039;, <b><tt>FALSE</tt></b> sinon.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>LENGTH</tt></b></td>
                        <td align="left">(entier)</td>
                        <td align="left">Longueur ou taille de la colonne telle que reportée par le
                        <acronym class="acronym">SGBD</acronym>.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>SCALE</tt></b></td>
                        <td align="left">(entier)</td>
                        <td align="left">Échelle du type <acronym class="acronym">SQL</acronym> <b><tt>NUMERIC</tt></b> ou <b><tt>DECIMAL</tt></b>.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>PRECISION</tt></b></td>
                        <td align="left">(entier)</td>
                        <td align="left">Précision du type <acronym class="acronym">SQL</acronym> <b><tt>NUMERIC</tt></b> ou <b><tt>DECIMAL</tt></b>.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>UNSIGNED</tt></b></td>
                        <td align="left">(booléen)</td>
                        <td align="left"><b><tt>TRUE</tt></b> si le type est un entier non signé, défini par
                        <b><tt>UNSIGNED</tt></b>.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>PRIMARY</tt></b></td>
                        <td align="left">(booléen)</td>
                        <td align="left"><b><tt>TRUE</tt></b> si la colonne fait partie d&#039;une clé
                        primaire.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>PRIMARY_POSITION</tt></b></td>
                        <td align="left">(entier)</td>
                        <td align="left">Position de la colonne dans la clé primaire.</td>
                    </tr>


                    <tr valign="middle">
                        <td align="left"><b><tt>IDENTITY</tt></b></td>
                        <td align="left">(booléen)</td>
                        <td align="left"><b><tt>TRUE</tt></b> si la colonne utilise une valeur
                        auto-générée.</td>
                    </tr>

                </tbody>
            
        </table>


        <blockquote><p><b class="note">Note</b>: <span class="info"><b>A quoi correspond le champs de métadonnées &quot;IDENTITY&quot; en fonction du SGBD
            ?</b><br /></span>
            

            
                Le champs de métadonnées &quot;IDENTITY&quot; a été choisi en tant que terme idiomatique
                pour représenter une relation de substitution de clés. Ce champ est généralement
                connu par les valeurs suivantes :
            <br />

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para"><b><tt>IDENTITY</tt></b> - DB2, MSSQL</p>
                </li>

                <li class="listitem">
                    <p class="para"><b><tt>AUTO_INCREMENT</tt></b> - MySQL</p>
                </li>

                <li class="listitem">
                    <p class="para"><b><tt>SERIAL</tt></b> - PostgreSQL</p>
                </li>

                <li class="listitem">
                    <p class="para"><b><tt>SEQUENCE</tt></b> - Oracle</p>
                </li>
            </ul>
        </p></blockquote>

        <p class="para">
            Si aucune table ne correspond à votre demande, alors  <span class="methodname">describeTable()</span>
            retourne un tableau vide.
        </p>
    </div>

    <div class="section" id="zend.db.adapter.closing" name="zend.db.adapter.closing"><div class="info"><h1 class="title">Fermer une connexion</h1></div>
        

        <p class="para">
            Normalement, il n&#039;est pas nécessaire de fermer explicitement sa connexion. <acronym class="acronym">PHP</acronym>
            nettoie automatiquement les ressources laissées ouvertes en fin de traitement. Les
            extensions des SGBDs ferment alors les connexions respectives pour les ressources
            détruites par <acronym class="acronym">PHP</acronym>.
        </p>

        <p class="para">
            Cependant, il se peut que vous trouviez utile de fermer la connexion manuellement.
            Vous pouvez alors utiliser la méthode de l&#039;adaptateur  <span class="methodname">closeConnection()</span>
            afin de fermer explicitement la connexion vers le SGBD.
        </p>

        <p class="para">
            A partir de la version 1.7.2, vous pouvez vérifier si vous êtes actuellement
            connecté au serveur SGBD grâce à la méthode  <span class="methodname">isConnected()</span>. Ceci correspond
            à une ressource de connexion qui a été initiée et qui n&#039;est pas close. Cette fonction ne
            permet pas actuellement de tester la fermeture de la connexion au niveau du SGBD par
            exemple. Cette fonction est utilisée en interne pour fermer la connexion. Elle vous
            permet entre autres de fermer plusieurs fois une connexion sans erreurs. C&#039;était déjà le
            cas avant la version 1.7.2 pour les adaptateurs de type <acronym class="acronym">PDO</acronym> mais pas pour les
            autres.
        </p>

        <div class="example"><div class="info"><p><b>Example #32 Fermer une connexion à un SGBD</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">closeConnection</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <blockquote><p><b class="note">Note</b>: <span class="info"><b>Zend_Db supporte-t-il les connexions persistantes ?</b><br /></span>
            

            
                Oui, la persistance est supportée grace à l&#039;addition de l&#039;option
                <code class="code">persistent</code> quand il est à une valeur true dans la configuration
                (pas celle du driver) d&#039;un adaptateur de <span class="classname">Zend_Db</span>.
            <br />

            <div class="example"><div class="info"><p><b>Example #33 Utiliser l&#039;option de persistance avec l&#039;adaptateur Oracle</b></p></div>
                
                <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$db</span> = Zend_Db::<span style="color: #006600;">factory</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'Oracle'</span>, <a href="http://www.php.net/array"><span style="color: #000066;">array</span></a><span style="color: #66cc66;">&#40;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'host'</span>&nbsp; &nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'127.0.0.1'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'username'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'webuser'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'password'</span>&nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'xxxxxxxx'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'dbname'</span>&nbsp; &nbsp; &nbsp;=&gt; <span style="color: #ff0000;">'test'</span>,</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #ff0000;">'persistent'</span> =&gt; <span style="color: #000000; font-weight: bold;">true</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

            </div>

            
                Notez cependant qu&#039;utiliser des connexions persistantes peut mener à un trop grand
                nombre de connexions en attente (idle), ce qui causera plus de problème que cela
                n&#039;est sensé en résoudre.
            <br />

            
                Les connexions aux bases de données possède un état. Dans cet état sont
                mémorisés des objets propres au SGBD. Par exemples des verrous, des variables
                utilisateur, des tables temporaires, des informations sur les requêtes récentes, les
                derniers enregistrements affectés, les dernières valeurs auto-générées, etc. Avec
                des connexions persistantes, il se peut que vous accédiez à des données ne faisant
                pas partie de votre session de travail avec le SGBD, ce qui peut s&#039;avérer
                dangereux.
            <br />

            
                Actuellement, seuls les adpatateurs Oracle, DB2 et <acronym class="acronym">PDO</acronym> (si spécifiés par <acronym class="acronym">PHP</acronym>)
                supportent la persistance avec Zend_Db.
            <br />
        </p></blockquote>
    </div>

    <div class="section" id="zend.db.adapter.other-statements" name="zend.db.adapter.other-statements"><div class="info"><h1 class="title">Exécuter des requêtes sur le driver directement</h1></div>
        

        <p class="para">
            Il peut y avoir des cas où vous souhaitez accéder directement à la connexion &#039;bas
            niveau&#039;, sous <span class="classname">Zend_Db_Adapter</span>.
        </p>

        <p class="para">
            Par exemple, toute requête effectuée par <span class="classname">Zend_Db</span> est
            préparée, et exécutée. Cependant, certaines caractéristiques des bases de données ne
            sont pas compatibles avec les requêtes préparées. Par exemple, des requêtes du type
            CREATE ou ALTER ne peuvent pas être préparées sous MySQL. De même, les requêtes
            préparées ne bénéficient pas du <a href="http://dev.mysql.com/doc/refman/5.1/en/query-cache-how.html" class="link external">&raquo;  cache de
            requêtes</a>, avant MySQL 5.1.17.
        </p>

        <p class="para">
            La plupart des extensions <acronym class="acronym">PHP</acronym> pour les bases de données proposent une méthode
            permettant d&#039;envoyer une requête directe, sans préparation. Par exemple, <acronym class="acronym">PDO</acronym> propose
            pour ceci la méthode  <span class="methodname">exec()</span>. Vous pouvez récupérer l&#039;objet de connexion
            &quot;bas niveau&quot; grâce à la méthode de l&#039;adaptateur  <span class="methodname">getConnection()</span>.
        </p>

        <div class="example"><div class="info"><p><b>Example #34 Envoyer une requête directe dans un adaptateur PDO</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">getConnection</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>-&gt;<span style="color: #006600;">exec</span><span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">'DROP TABLE bugs'</span><span style="color: #66cc66;">&#41;</span>;</div></li></ol></div></div></div>

        </div>

        <p class="para">
            De la même manière, vous pouvez accéder à toutes les propriétés ou méthodes de
            l&#039;objet &quot;bas niveau&quot;, utilisé par <span class="classname">Zend_Db</span>. Attention toutefois en
            utilisant ce procédé, vous risquez de rendre votre application dépendante du SGBD
            qu&#039;elle utilise, en manipulant des méthodes propres à l&#039;extension utilisée.
        </p>

        <p class="para">
            Dans de futures versions de <span class="classname">Zend_Db</span>, il sera possible
            d&#039;ajouter des méthodes pour des fonctionnalités communes aux extensions de bases de
            données de <acronym class="acronym">PHP</acronym>. Ceci ne rompra pas la compatibilité.
        </p>
    </div>

    <div class="section" id="zend.db.adapter.server-version" name="zend.db.adapter.server-version"><div class="info"><h1 class="title">Récupérer la version du serveur SGBD</h1></div>
        

        <p class="para">
            A partir de la version 1.7.2, vous pouvez récupérer la version du serveur avec le
            style de syntaxe <acronym class="acronym">PHP</acronym> ce qui permet d&#039;utiliser  <span class="methodname">version_compare()</span>. Si cette
            information n&#039;est pas disponible, vous recevrez un <b><tt>NULL</tt></b>.
        </p>

        <div class="example"><div class="info"><p><b>Example #35 Vérifier la version du serveur avant de lancer une requête</b></p></div>
            

            <div class="programlisting php"><div class="phpcode"><div class="php" style="font-family: monospace;"><ol><li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #0000ff;">$version</span> = <span style="color: #0000ff;">$db</span>-&gt;<span style="color: #006600;">getServerVersion</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;</div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span>!<a href="http://www.php.net/is_null"><span style="color: #000066;">is_null</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$version</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #66cc66;">&#40;</span><a href="http://www.php.net/version_compare"><span style="color: #000066;">version_compare</span></a><span style="color: #66cc66;">&#40;</span><span style="color: #0000ff;">$version</span>, <span style="color: #ff0000;">'5.0.0'</span>, <span style="color: #ff0000;">'&gt;='</span><span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// faire quelquechose</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// faire autre chose</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #66cc66;">&#125;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span> <span style="color: #b1b100;">else</span> <span style="color: #66cc66;">&#123;</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;">&nbsp; &nbsp; <span style="color: #808080; font-style: italic;">// impossible de lire la version du serveur</span></div></li>
<li style="font-family: 'Courier New', Courier, monospace; color: black; font-weight: normal; font-style: normal;"><div style="font-family: 'Courier New', Courier, monospace; font-weight: normal;"><span style="color: #66cc66;">&#125;</span></div></li></ol></div></div></div>

        </div>
    </div>

    <div class="section" id="zend.db.adapter.adapter-notes" name="zend.db.adapter.adapter-notes"><div class="info"><h1 class="title">Notes sur des adaptateur spécifiques</h1></div>
        

        <p class="para">
            Cette section liste des différences entre les adaptateurs, que vous devriez
            considérer.
        </p>

        <div class="section" id="zend.db.adapter.adapter-notes.ibm-db2" name="zend.db.adapter.adapter-notes.ibm-db2"><div class="info"><h1 class="title">IBM DB2</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">Passez le paramètre &#039;Db2&#039; à la méthode  <span class="methodname">factory()</span>.</p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise l&#039;extension <acronym class="acronym">PHP</acronym> ibm_db2.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        IBM DB2 supporte les séquences et les clés auto-incrémentées. Les
                        arguments de  <span class="methodname">lastInsertId()</span> sont donc optionnels. Si vous ne
                        passez pas de paramètres, alors l&#039;adaptateur retourne la dernière valeur de
                        clé auto- incrémentée. Sinon, il retourne la dernière valeur de la séquence
                        passée en paramètre, en se référant à la convention
                        &#039;<em class="emphasis">table</em>_<em class="emphasis">colonne</em>_seq&#039;.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.mysqli" name="zend.db.adapter.adapter-notes.mysqli"><div class="info"><h1 class="title">MySQLi</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Mysqli&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise l&#039;extension <acronym class="acronym">PHP</acronym> mysqli.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        MySQL ne supporte pas les séquences, donc  <span class="methodname">lastInsertId()</span>
                        ignore tout paramètre qu&#039;on lui passe. Elle retourne toujours la valeur de
                        la dernière clé auto-incrémentée.  <span class="methodname">lastSequenceId()</span>, elle,
                        retourne toujours <b><tt>NULL</tt></b>.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.oracle" name="zend.db.adapter.adapter-notes.oracle"><div class="info"><h1 class="title">Oracle</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Oracle&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise l&#039;extension <acronym class="acronym">PHP</acronym> oci8.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Oracle ne supporte pas les clé auto-incrémentées, donc vous devriez
                        spécifier un paramètre de séquence à  <span class="methodname">lastInsertId()</span> ou
                         <span class="methodname">lastSequenceId()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        L&#039;extension Oracle ne supporte pas les paramètres positionnés (?).
                        Vous devez utiliser des paramètres nommés (:name).
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Actuellement l&#039;option <span class="classname">Zend_Db::CASE_FOLDING</span>
                        n&#039;est pas supportée par l&#039;adaptateur Oracle. Pour l&#039;utiliser, vous devez
                        utiliser l&#039;adaptateur basé sur <acronym class="acronym">PDO</acronym> et OCI.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Par défaut les champs LOB (&quot;Large Objet Binaire&quot;) sont retournés sous
                        la forme d&#039;objets OCI-Lob. Vous pouvez les récupérer sous forme de chaînes
                        pour toutes les requêtes en utilisant l&#039;option de driver
                        <code class="code">&#039;lob_as_string&#039;</code> ou pour une requête en particulier en utilisant
                        la méthode  <span class="methodname">setLobAsString(boolean)</span> de l&#039;adaptateur ou de
                        l&#039;objet statement.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.sqlsrv" name="zend.db.adapter.adapter-notes.sqlsrv"><div class="info"><h1 class="title">Microsoft SQL Server</h1></div>
            
            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Specify this Adapter to the  <span class="methodname">factory()</span> method with
                        the name &#039;Sqlsrv&#039;.
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        This Adapter uses the <acronym class="acronym">PHP</acronym> extension sqlsrv
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        Microsoft <acronym class="acronym">SQL</acronym> Server does not support sequences, so
                         <span class="methodname">lastInsertId()</span> ignores primary key argument and
                        returns the last value generated for an auto-increment key if a table name
                        is specified or a last insert query returned id. The
                         <span class="methodname">lastSequenceId()</span> method returns
                        <b><tt>NULL</tt></b>.
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        <span class="classname">Zend_Db_Adapter_Sqlsrv</span> sets
                        <b><tt>QUOTED_IDENTIFIER ON</tt></b> immediately after connecting to
                        a <acronym class="acronym">SQL</acronym> Server database. This makes the driver use the
                        standard <acronym class="acronym">SQL</acronym> identifier delimiter symbol
                        (<em class="emphasis">&quot;</em>) instead of the proprietary square-brackets
                        syntax <acronym class="acronym">SQL</acronym> Server uses for delimiting identifiers.
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        You can specify <span class="property">driver_options</span> as a key in the options
                        array. The value can be a anything from here <a href="http://msdn.microsoft.com/en-us/library/cc296161(SQL.90).aspx" class="link external">&raquo; http://msdn.microsoft.com/en-us/library/cc296161(SQL.90).aspx</a>.
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        You can use  <span class="methodname">setTransactionIsolationLevel()</span> to set
                        isolation level for current connection. The value can be
                        <b><tt>SQLSRV_TXN_READ_UNCOMMITTED</tt></b>,
                        <b><tt>SQLSRV_TXN_READ_COMMITTED</tt></b>,
                        <b><tt>SQLSRV_TXN_REPEATABLE_READ</tt></b>,
                        <b><tt>SQLSRV_TXN_SNAPSHOT</tt></b> or
                        <b><tt>SQLSRV_TXN_SERIALIZABLE</tt></b>.
                    </p>
                </li>
                <li class="listitem">
                    <p class="para">
                        As of Zend Framework 1.9, the minimal supported build of the
                        <acronym class="acronym">PHP</acronym> <acronym class="acronym">SQL</acronym> Server extension from
                        Microsoft is 1.0.1924.0. and the <acronym class="acronym">MSSQL</acronym> Server Native
                        Client version 9.00.3042.00.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-ibm" name="zend.db.adapter.adapter-notes.pdo-ibm"><div class="info"><h1 class="title">PDO pour IBM DB2 et Informix Dynamic Server (IDS)</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Pdo_Ibm&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_ibm.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Vous devez possédez l&#039;extension PDO_IBM en version 1.2.2 minimum. Si
                        ce n&#039;est pas le cas, vous devrez la mettre à jour via <acronym class="acronym">PECL</acronym>.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-mssql" name="zend.db.adapter.adapter-notes.pdo-mssql"><div class="info"><h1 class="title">PDO Microsoft SQL Server</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Pdo_Mssql&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_dblib.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Microsoft <acronym class="acronym">SQL</acronym> Server ne supporte pas les séquences, ainsi
                         <span class="methodname">lastInsertId()</span> ignore les paramètres qu&#039;on lui passe et
                        retourne toujours la valeur de la dernière clé auto-incrémentée.
                         <span class="methodname">lastSequenceId()</span> retourne toujours <b><tt>NULL</tt></b>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Si vous travaillez avec des chaînes Unicode avec un encodage autre que
                        UCS-2 (comme UTF-8), vous devrez peut-être réaliser une conversion dans
                        votre code d&#039;application ou stocker les données dans un champs binaire.
                        Reportez vous à la <a href="http://support.microsoft.com/kb/232580" class="link external">&raquo;  base
                        de connaissance Microsoft</a> pour plus d&#039;informations.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Zend_Db_Adapter_Pdo_Mssql met <b><tt>QUOTED_IDENTIFIER</tt></b> à ON dès
                        que la connexion a été effectuée. Le driver utilise donc le délimiteur
                        d&#039;identifiant <acronym class="acronym">SQL</acronym> <code class="code">&quot;</code> au lieu de son délimiteur habituel.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Vous pouvez spécifier la clé <code class="code">pdoType</code> dans le tableau
                        d&#039;options de construction de l&#039;adaptateur. La valeur peut être &quot;mssql&quot;
                        (défaut), &quot;dblib&quot;, &quot;freetds&quot;, ou &quot;sybase&quot;. Cette option affecte la syntaxe
                        du préfixe DSN que l&#039;adaptateur utilisera. &quot;freetds&quot; et &quot;sybase&quot; impliquent
                        un préfixe &quot;sybase:&quot;, qui est utilisé par les librairies <a href="http://www.freetds.org/" class="link external">&raquo; FreeTDS</a>.Voyez aussi <a href="http://www.php.net/manual/en/ref.pdo-dblib.connection.php" class="link external">&raquo; 
                        http://www.php.net/manual/en/ref.pdo-dblib.connection.php</a> pour plus
                        d&#039;informations sur les DSN pour ce driver.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-mysql" name="zend.db.adapter.adapter-notes.pdo-mysql"><div class="info"><h1 class="title">PDO MySQL</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Pdo_Mysql&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_mysql.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        MySQL ne supporte pas les séquences, ainsi  <span class="methodname">lastInsertId()</span>
                        ignore les paramètres qu&#039;on lui passe et retourne toujours la valeur de la
                        dernière clé auto-incrémentée.  <span class="methodname">lastSequenceId()</span> retourne
                        toujours <b><tt>NULL</tt></b>.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-oci" name="zend.db.adapter.adapter-notes.pdo-oci"><div class="info"><h1 class="title">PDO Oracle</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;Pdo_Oci&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_oci.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Oracle ne supporte pas les clé auto-incrémentées, donc vous devriez
                        spécifier un paramètre de séquence à  <span class="methodname">lastInsertId()</span> ou
                         <span class="methodname">lastSequenceId()</span>.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-pgsql" name="zend.db.adapter.adapter-notes.pdo-pgsql"><div class="info"><h1 class="title">PDO PostgreSQL</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;PDO_Pgsql&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_pgsql.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        PostgreSQL supporte les séquences et les clés auto-incrémentées. Les
                        arguments de  <span class="methodname">lastInsertId()</span> sont donc optionnels. Si vous ne
                        passez pas de paramètres, alors l&#039;adaptateur retourne la dernière valeur de
                        clé auto- incrémentée. Sinon, il retourne la dernière valeur de la séquence
                        passée en paramètre, en se référant à la convention
                        &#039;<em class="emphasis">table</em>_<em class="emphasis">colonne</em>_seq&#039;.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.pdo-sqlite" name="zend.db.adapter.adapter-notes.pdo-sqlite"><div class="info"><h1 class="title">PDO SQLite</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">
                        Passez le paramètre &#039;PDO_Sqlite&#039; à la méthode
                         <span class="methodname">factory()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Cet adaptateur utilise les extensions <acronym class="acronym">PHP</acronym> pdo et pdo_sqlite.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        SQLite ne supporte pas les séquences, ainsi
                         <span class="methodname">lastInsertId()</span> ignore les paramètres qu&#039;on lui passe et
                        retourne toujours la valeur de la dernière clé auto-incrémentée.
                         <span class="methodname">lastSequenceId()</span> retourne toujours <b><tt>NULL</tt></b>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Pour vous connecter à une base de données SQLite2, spécifiez le
                        paramètre <code class="code">&#039;sqlite2&#039;=&gt;true</code> dans le tableau d&#039;options passé à
                        l&#039;adaptateur, lors de la création de l&#039;instance de Pdo_Sqlite
                        Adapter.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Pour vous connecter à une base de données SQLite en mémoire, spécifiez
                        le paramètre <code class="code">&#039;dsnprefix&#039;=&gt;&#039;:memory:&#039;</code> dans le tableau
                        d&#039;options passé à l&#039;adaptateur, lors de la création de l&#039;instance de
                        Pdo_Sqlite Adapter.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Les anciennes versions du driver SQLite pour <acronym class="acronym">PHP</acronym> ne semblent pas
                        supporter les commandes PRAGMA nécessaires pour s&#039;assurer que les colonnes
                        ayant un nom court soient utilisées dans les résultats. Si vous avez des
                        problèmes, tels que vos enregistrements sont retournés avec une forme
                        &quot;nomtable.nomcolonne&quot; lors de vos jointures, vous devriez alors mettre à
                        jour votre version de <acronym class="acronym">PHP</acronym>.
                    </p>
                </li>
            </ul>
        </div>

        <div class="section" id="zend.db.adapter.adapter-notes.firebird" name="zend.db.adapter.adapter-notes.firebird"><div class="info"><h1 class="title">Firebird (Interbase)</h1></div>
            

            <ul class="itemizedlist">
                <li class="listitem">
                    <p class="para">Cet adaptateur utilise l&#039;extension <acronym class="acronym">PHP</acronym> php_interbase.</p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Firebird (Interbase) ne supporte pas les clé auto-incrémentées, donc
                        vous devez spécifier un paramètre de séquence à  <span class="methodname">lastInsertId()</span>
                        ou  <span class="methodname">lastSequenceId()</span>.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">
                        Pour l&#039;instant l&#039;option <span class="classname">Zend_Db::CASE_FOLDING</span>
                        n&#039;est pas supportée par l&#039;adaptateur Firebird (Interbase). Tout identificateur
                        non échappé sera automatiquement retourné en majuscules.
                    </p>
                </li>

                <li class="listitem">
                    <p class="para">Le nom de l&#039;adaptateur est ZendX_Db_Adapter_Firebird.</p>
                    <p class="para">
                        Rappelez vous qu&#039;il est nécessaire d&#039;utiliser le paramètre
                        &#039;adapterNamespace&#039; avec la valeur ZendX_Db_Adapter.
                    </p>
                    <p class="para">
                        Nous recommandons de mettre à jour gds32.dll (ou l&#039;équivalent linux)
                        embarqué avec <acronym class="acronym">PHP</acronym>, à la même version que celle du serveur. Pour Firebird
                        l&#039;équivalent à <var class="filename">gds32.dll</var> est
                        <var class="filename">fbclient.dll</var>.
                    </p>
                    <p class="para">
                        Par défaut tous les identifiants (nomde tables, de cahmps) sont retournés en
                        majuscules.
                    </p>
                </li>
            </ul>
        </div>
    </div>
</div>
        <hr />

            <table width="100%">
                <tr>
                    <td width="25%" style="text-align: left;">
                    <a href="zend.db.html">Zend_Db</a>
                    </td>

                    <td width="50%" style="text-align: center;">
                        <div class="up"><span class="up"><a href="zend.db.html">Zend_Db</a></span><br />
                        <span class="home"><a href="manual.html">Programmer's Reference Guide</a></span></div>
                    </td>

                    <td width="25%" style="text-align: right;">
                        <div class="next" style="text-align: right; float: right;"><a href="zend.db.statement.html">Zend_Db_Statement</a></div>
                    </td>
                </tr>
            </table>
</td>
        <td style="font-size: smaller;" width="15%"> <style type="text/css">
#leftbar {
	float: left;
	width: 186px;
	padding: 5px;
	font-size: smaller;
}
ul.toc {
	margin: 0px 5px 5px 5px;
	padding: 0px;
}
ul.toc li {
	font-size: 85%;
	margin: 1px 0 1px 1px;
	padding: 1px 0 1px 11px;
	list-style-type: none;
	background-repeat: no-repeat;
	background-position: center left;
}
ul.toc li.header {
	font-size: 115%;
	padding: 5px 0px 5px 11px;
	border-bottom: 1px solid #cccccc;
	margin-bottom: 5px;
}
ul.toc li.active {
	font-weight: bold;
}
ul.toc li a {
	text-decoration: none;
}
ul.toc li a:hover {
	text-decoration: underline;
}
</style>
 <ul class="toc">
  <li class="header home"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="manual.html">Programmer's Reference Guide</a></li>
  <li class="header up"><a href="reference.html">Zend Framework Reference</a></li>
  <li class="header up"><a href="zend.db.html">Zend_Db</a></li>
  <li class="active"><a href="zend.db.adapter.html">Zend_Db_Adapter</a></li>
  <li><a href="zend.db.statement.html">Zend_Db_Statement</a></li>
  <li><a href="zend.db.profiler.html">Zend_Db_Profiler</a></li>
  <li><a href="zend.db.select.html">Zend_Db_Select</a></li>
  <li><a href="zend.db.table.html">Zend_Db_Table</a></li>
  <li><a href="zend.db.table.row.html">Zend_Db_Table_Row</a></li>
  <li><a href="zend.db.table.rowset.html">Zend_Db_Table_Rowset</a></li>
  <li><a href="zend.db.table.relationships.html">Relations Zend_Db_Table</a></li>
  <li><a href="zend.db.table.definition.html">Zend_Db_Table_Definition</a></li>
 </ul>
 </td>
    </tr>
</table>
</body>
</html>